
<!DOCTYPE html>
<html class="no-js" lang="ja">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="generator" content="Hugo 0.15" />

    <base href="http://www.shinayoshi.net/" />
    <title>shinayoshi&#39;s note</title>
    <link rel="canonical" href="http://www.shinayoshi.net/" />
    <link href="http://www.shinayoshi.net//img/favicon.ico" type="image/vnd.microsoft.icon" rel="icon" />
    <link href="http://www.shinayoshi.net/index.xml" rel="alternate" title="shinayoshi&#39;s note" type="application/rss+xml" />

    
    <link href="http://www.shinayoshi.net//css/bootstrap.min.css" rel="stylesheet">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://yandex.st/highlightjs/8.0/styles/default.min.css">

    
    
    
  </head>
  <body>
    <div id="wrap">


      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" title="toggle navbar" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="http://www.shinayoshi.net//">shinayoshi&#39;s note</a>
            </div>
            <div class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <li><a href="http://www.shinayoshi.net//">Home</a></li>
                <li><a href="http://www.shinayoshi.net//post/">All posts</a></li>
              </ul>
              <ul class="nav navbar-nav navbar-right">
                
                <li>
                  <form class="search navbar-form navbar-right" role="search" action="https://www.google.com/search" method="GET">
                    <input type="hidden" name="sitesearch" value="www.shinayoshi.net" />
                    <div class="form-group">
                      <input type="text" class="form-control" placeholder="Search" name="q" />
                    </div>
                  </form>
                </li>
                
                <li>
                  <a class="subscribe-rss" href="http://www.shinayoshi.net/index.xml" title="subscribe via RSS">
                    <i class="fa fa-rss fa-lg"></i>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </header>


      <div id="main" role="main" class="container">
        <div id="content">
          <div class="row">
            <div class="page-content col-md-9">
              
              <article>
                <div class="title">
                  <h1><a href="http://www.shinayoshi.net/post/2016/07/16/raspberrypi-kivy-setup/">RaspbianにKivyをセットアップ</a></h1>
                  <p>
                    <span class="label label-primary">Sat Jul 16, 2016</span> in
                    
                    
                    <a href="http://www.shinayoshi.net//categories/server">server</a>
                     using tags
                    
                    
                    <a href="http://www.shinayoshi.net//tags/raspberrypi">raspberrypi</a>
                    
                     , 
                    <a href="http://www.shinayoshi.net//tags/kivy">kivy</a>
                    
                  </p>
                </div>
                <div class="contents">
                  

<p>Raspberry Pi 7&rdquo; Touch Screen LCDに接続したRaspberry Pi 3 (Raspbian)にKivyをインストールしてデモを動かすまでのメモです。</p>

<h2 id="kivyのインストール:7e54fa4db923fa1d790b8a2df258af41">Kivyのインストール</h2>

<p>Kivyに必要なパッケージをインストールする。</p>

<blockquote>
<p>$ sudo apt-get update<br />
$ sudo apt-get install libsdl2-dev libsdl2-image-dev libsdl2-mixer-dev libsdl2-ttf-dev pkg-config libgl1-mesa-dev libgles2-mesa-dev python-setuptools libgstreamer1.0-dev git-core gstreamer1.0-plugins-{bad,base,good,ugly} gstreamer1.0-{omx,alsa} python-dev cython</p>

<p>$ sudo reboot</p>
</blockquote>

<p>Kivyをインストールする。</p>

<blockquote>
<p>$ git clone <a href="https://github.com/kivy/kivy">https://github.com/kivy/kivy</a><br />
$ cd kivy<br />
$ make<br />
$ echo &ldquo;export PYTHONPATH=$(pwd):\$PYTHONPATH&rdquo; &gt;&gt; ~/.profile<br />
$ source ~/.profile</p>
</blockquote>

<ul>
<li><a href="https://kivy.org/docs/installation/installation-rpi.html">Installation on Raspberry Pi — Kivy 1.9.2-dev0 documentation</a></li>
</ul>

<h2 id="raspberry-pi-7-touch-screen-lcdの利用設定:7e54fa4db923fa1d790b8a2df258af41">Raspberry Pi 7&rdquo; Touch Screen LCDの利用設定</h2>

<blockquote>
<p>$ vi ~/.kivy/config.ini<br />
[input]<br />
mouse = mouse<br />
mtdev_%(name)s = probesysfs,provider=mtdev<br />
hid_%(name)s = probesysfs,provider=hidinput</p>
</blockquote>

<h2 id="kivyデモを実行:7e54fa4db923fa1d790b8a2df258af41">Kivyデモを実行</h2>

<p>デモ実行に必要なパッケージをインストールする。</p>

<blockquote>
<p>$ sudo apt-get install xclip xsel<br />
$ sudo pip install pygments docutils</p>
</blockquote>

<h3 id="デモ１-showcase:7e54fa4db923fa1d790b8a2df258af41">デモ１(showcase)</h3>

<blockquote>
<p>$ cd ~/kivy/examples/demo/showcase<br />
$ python main.py</p>
</blockquote>

<h3 id="デモ２-3drendering:7e54fa4db923fa1d790b8a2df258af41">デモ２(3Drendering)</h3>

<blockquote>
<p>$ cd ~/kivy/examples/3Drendering<br />
$ python main.py</p>
</blockquote>

<h2 id="kivyのプログラムを作成-実行:7e54fa4db923fa1d790b8a2df258af41">Kivyのプログラムを作成・実行</h2>

<p><a href="http://a-zumi.net/python-kivy-simple-paint/">【Python】Kivyを使ってシンプルなペイントツールを作成する方法</a>を参考に、自前でペイントツールを作成し、実行する。</p>

<p>ソースコードを作成する。</p>

<blockquote>
<p>$ vi paint.py<br />
<script src="https://gist.github.com/kurozumi/31f250c38662a102afa5.js"></script></p>
</blockquote>

<p>実行する。</p>

<blockquote>
<p>$ python paint.py</p>
</blockquote>

<p>Raspberry Pi 7&rdquo; Touch Screen LCDをタッチすることで線が引けることを確認する。</p>

<p>以上</p>

                </div>
              </article>
              
              <article>
                <div class="title">
                  <h1><a href="http://www.shinayoshi.net/post/2016/07/12/raspberrypi-touchscreen-setup/">Raspberry Pi 3にRaspberry Pi 7&#34; Touch Screen LCDを接続</a></h1>
                  <p>
                    <span class="label label-primary">Tue Jul 12, 2016</span> in
                    
                    
                    <a href="http://www.shinayoshi.net//categories/server">server</a>
                     using tags
                    
                    
                    <a href="http://www.shinayoshi.net//tags/raspberrypi">raspberrypi</a>
                    
                     , 
                    <a href="http://www.shinayoshi.net//tags/jessie">jessie</a>
                    
                  </p>
                </div>
                <div class="contents">
                  

<p>Raspberry Pi 3のディスプレイとして「Official 7&rdquo; Touchscreen Display＋フレーム セット（青）」を購入した。
Raspberry Pi 3に接続して最低限使えるようにするまでをメモする。</p>

<h2 id="接続:2020837d634538f02be0a31ea2dca63e">接続</h2>

<p>以下のWebサイトを参考に接続する。</p>

<ul>
<li><a href="https://raspberry-pi.ksyic.com/page/page/pgp.id/4">Raspberry Pi 7インチ タッチ・スクリーン ディスプレイ 接続・取り付け方法 - Raspberry Pi Shop by KSY:</a></li>
<li><a href="https://www.raspberrypi.org/blog/the-eagerly-awaited-raspberry-pi-display/">The Eagerly Awaited Raspberry Pi Display - Raspberry Pi</a></li>
</ul>

<h2 id="天地逆転を直す:2020837d634538f02be0a31ea2dca63e">天地逆転を直す</h2>

<p>購入したフレームを使用すると天地が逆転した状態で起動する(製品仕様)。Raspberry Pi 3側で画面の回転を設定することで天地逆転を直す。</p>

<blockquote>
<p>$ sudo vi /boot/config.txt<br />
#Add the following line<br />
lcd_rotate=2<br />
$ sudo reboot</p>
</blockquote>

<ul>
<li><a href="http://learn.pimoroni.com/tutorial/pi-lcd/getting-started-with-raspberry-pi-7-touchscreen-lcd">Getting Started with the Raspberry Pi 7&rdquo; Touchscreen LCD - Pimoroni Yarr-niversity</a></li>
</ul>

<h2 id="日本語環境の整備:2020837d634538f02be0a31ea2dca63e">日本語環境の整備</h2>

<p>日本語関連パッケージをインストールする。余計なパッケージもインストールされてしまいますが、楽な方法ではあります。</p>

<blockquote>
<p>$ sudo apt-get install task-japanese task-japanese-desktop</p>
</blockquote>

<h2 id="スクリーンキーボードのインストール:2020837d634538f02be0a31ea2dca63e">スクリーンキーボードのインストール</h2>

<p>Touchscreen Displayだけで操作を行うために、On Screen Keyboardを導入する。</p>

<blockquote>
<p>$ sudo apt-get install florence<br />
$ sudo apt-get install at-spi2-core</p>
</blockquote>

<p>ログイン画面でもOn Screen Keyboardを使用できるように設定する。</p>

<blockquote>
<p>$ sudo vi /etc/lightdm/lightdm-gtk-greeter.conf<br />
show-indicators=~language;~a11y;~session;~power<br />
keyboard=florence &ndash;focus</p>
</blockquote>

<ul>
<li><a href="http://xmodulo.com/onscreen-virtual-keyboard-linux.html">How to use on-screen virtual keyboard on Linux - Xmodulo</a></li>
<li><a href="https://www.raspberrypi.org/forums/viewtopic.php?f=108&amp;t=123189">Raspberry Pi • View topic - Solution for Jessie and Florence virtual keyboard crash</a></li>
<li><a href="https://www.raspberrypi.org/forums/viewtopic.php?f=63&amp;t=113526">Raspberry Pi • View topic - Virtual Keyboard on Login Screen</a></li>
</ul>

<h2 id="リモートデスクトップ接続:2020837d634538f02be0a31ea2dca63e">リモートデスクトップ接続</h2>

<p>xrdp接続でRaspberry Pi 3にリモートデスクトップ接続する。</p>

<blockquote>
<p>$ sudo apt-get install xrdp</p>
</blockquote>

<p>Firewall等でリモートデスクトップ接続に必要なポートを開ける。ポートの確認は以下のファイルを確認する。</p>

<blockquote>
<p>$ cat /etc/xrdp/xrdp.ini
$ cat /etc/xrdp/sesman.ini</p>
</blockquote>

<ul>
<li><a href="http://www.tapun.net/raspi/raspberry-pi-xrdp">Raspberry Pi | RDPで接続してみたいxrdpでWindows端末に画面転送します – たぷん日記</a></li>
</ul>

<p>以上</p>

                </div>
              </article>
              
              <article>
                <div class="title">
                  <h1><a href="http://www.shinayoshi.net/post/2016/07/10/raspbian-wifi-setup/">Raspberry Pi 3でWiFi設定</a></h1>
                  <p>
                    <span class="label label-primary">Sun Jul 10, 2016</span> in
                    
                    
                    <a href="http://www.shinayoshi.net//categories/server">server</a>
                     using tags
                    
                    
                    <a href="http://www.shinayoshi.net//tags/raspberrypi">raspberrypi</a>
                    
                     , 
                    <a href="http://www.shinayoshi.net//tags/wifi">WiFi</a>
                    
                  </p>
                </div>
                <div class="contents">
                  

<p>Raspberry Pi 3には標準でWiFiモジュールが搭載されている。
今回はWiFi設定を行う。</p>

<h2 id="wifiネットワークのスキャン:366b0c30f1d198568510d56bfae90a97">WiFiネットワークのスキャン</h2>

<p>接続するWiFiネットワークを確認する。</p>

<blockquote>
<p>$ sudo iwlist wlan0 scan</p>
</blockquote>

<h2 id="アクセスポイントの設定:366b0c30f1d198568510d56bfae90a97">アクセスポイントの設定</h2>

<p>アクセスポイントを設定する。</p>

<blockquote>
<p>$ sudo cp -p /etc/wpa_supplicant/wpa_supplicant.conf{,.org}<br />
$ sudo sh -c &ldquo;wpa_passphrase &lsquo;アクセスポイント名(ESSID)&rsquo; &lsquo;アクセスポイントのパスワード&rsquo; &gt;&gt; /etc/wpa_supplicant/wpa_supplicant.conf&rdquo;<br />
$ sudo cat /etc/wpa_supplicant/wpa_supplicant.conf<br />
country=JP<br />
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev<br />
update_config=1<br />
network={<br />
    ssid=&ldquo;アクセスポイント名(ESSID)&rdquo;<br />
    #psk=&ldquo;先ほどのコマンドで入力したパスワード(不要であれば削除する)&rdquo;<br />
    psk=暗号化されたパスワード<br />
}</p>
</blockquote>

<h2 id="wifiの有効化:366b0c30f1d198568510d56bfae90a97">WiFiの有効化</h2>

<p>WiFiを有効化する。</p>

<blockquote>
<p>$ sudo ifdown wlan0<br />
$ sudo ifup wlan0<br />
$ ifconfig wlan0</p>
</blockquote>

<h2 id="ipアドレスの固定化:366b0c30f1d198568510d56bfae90a97">IPアドレスの固定化</h2>

<p>IPアドレスを固定化する。</p>

<blockquote>
<p>$ sudo vi /etc/dhcpcd.conf<br />
#Add the following line<br />
interface wlan0<br />
static ip_address=192.168.100.<sup>10</sup>&frasl;<sub>24</sub><br />
static routers=192.168.100.1<br />
static domain_name_servers=192.168.100.1<br />
#static domain_name=<br />
#static domain_search=</p>
</blockquote>

<p>WiFiデバイスを再起動する。IPアドレスが固定化されていることを確認する。</p>

<blockquote>
<p>$ sudo ifdown wlan0<br />
$ sudo ifup wlan0<br />
$ ifconfig wlan0</p>
</blockquote>

<h2 id="参考:366b0c30f1d198568510d56bfae90a97">参考</h2>

<ul>
<li><a href="https://www.raspberrypi.org/documentation/configuration/wireless/wireless-cli.md">Setting WiFi up via the command line - Raspberry Pi Documentation</a></li>
<li><a href="http://move0tofu.hatenablog.jp/entry/2016/04/30/215517">Raspberry Pi 3 Model B環境構築 その3(WiFi設定) - @0tofuの備忘録&hellip;</a></li>
</ul>

<p>以上</p>

                </div>
              </article>
              
              <article>
                <div class="title">
                  <h1><a href="http://www.shinayoshi.net/post/2016/07/09/raspbian-jessie-setup/">Raspbianの初期設定</a></h1>
                  <p>
                    <span class="label label-primary">Sat Jul 9, 2016</span> in
                    
                    
                    <a href="http://www.shinayoshi.net//categories/server">server</a>
                     using tags
                    
                    
                    <a href="http://www.shinayoshi.net//tags/raspberrypi">raspberrypi</a>
                    
                     , 
                    <a href="http://www.shinayoshi.net//tags/jessie">jessie</a>
                    
                  </p>
                </div>
                <div class="contents">
                  

<p>こちらも何番煎じかわかりませんが、Raspbianをインストールした後の初期設定メモです。</p>

<h2 id="前提:29d369a29c800517b14390fe39a79e9d">前提</h2>

<p>Raspberry Pi 3にRaspbian Jessie (2016-05-27版)をインストールした環境の初期設定を想定する。ただし、セキュリティ関連の設定は省略する(例えば、SSH接続の公開鍵認証設定やFirewall設定、不要サービスの停止など)。</p>

<h2 id="パッケージ更新:29d369a29c800517b14390fe39a79e9d">パッケージ更新</h2>

<blockquote>
<p>$ sudo apt-get update<br />
$ sudo apt-get upgrade</p>
</blockquote>

<ul>
<li><a href="https://www.raspberrypi.org/documentation/raspbian/updating.md">Updating and Upgrading Raspbian - Raspberry Pi Documentation</a></li>
</ul>

<h2 id="ipアドレス固定化:29d369a29c800517b14390fe39a79e9d">IPアドレス固定化</h2>

<p>Raspberry Pi 3のIPアドレスを固定する。</p>

<blockquote>
<p>$ sudo vi /etc/dhcpd.conf<br />
#Add the following line<br />
interface eth0<br />
static ip_address=192.168.40.<sup>10</sup>&frasl;<sub>24</sub><br />
static routers=192.168.40.254<br />
static domain_name_servers=192.168.100.1<br />
#static domain_name=<br />
#static domain_search=</p>
</blockquote>

<ul>
<li>&ldquo;man dhcpcd.conf&rdquo;</li>
</ul>

<h2 id="usbポートの電流供給増加:29d369a29c800517b14390fe39a79e9d">USBポートの電流供給増加</h2>

<p>USBポートの電流供給を1.2A(4ポート合計)まで供給できるようにする。</p>

<blockquote>
<p>$ sudo vi /boot/config.txt<br />
#Add the following line<br />
max_usb_current=1</p>
</blockquote>

<ul>
<li><a href="http://elinux.org/RPiconfig">RPiconfig - eLinux.org</a></li>
</ul>

<h2 id="raspi-config関連:29d369a29c800517b14390fe39a79e9d">raspi-config関連</h2>

<blockquote>
<p>$ sudo raspi-config</p>
</blockquote>

<h3 id="ディスク拡張:29d369a29c800517b14390fe39a79e9d">ディスク拡張</h3>

<ol>
<li>「1 Expand Filesystem」を選択する。</li>
<li>「Ok」を選択する。</li>
<li>raspi-configの初期画面に戻る。</li>
</ol>

<h3 id="タイムゾーン設定:29d369a29c800517b14390fe39a79e9d">タイムゾーン設定</h3>

<ol>
<li>「5 Internationalisation Options」を選択する。</li>
<li>「I1 Change Locale」を選択する。</li>
<li>「en_GB.UTF-8 UTF-8」の選択を外す。</li>
<li>「ja_JP.UTF-8 UTF-8」を選択する。</li>
<li>「Ok」を選択する。</li>
<li>「ja_JP.UTF-8」を選択する。</li>
<li>「Ok」を選択する。</li>
<li>raspi-configの初期画面に戻る。</li>
</ol>

<h3 id="文字コード設定:29d369a29c800517b14390fe39a79e9d">文字コード設定</h3>

<ol>
<li>「5 Internationalisation Options」を選択する。</li>
<li>「I2 Change Timezone」を選択する。</li>
<li>「Asia」を選択する。</li>
<li>「Tokyo」を選択する。</li>
<li>raspi-configの初期画面に戻る。</li>
</ol>

<h3 id="wifiの国設定:29d369a29c800517b14390fe39a79e9d">Wifiの国設定</h3>

<ol>
<li>「5 Internationalisation Options」を選択する。</li>
<li>「I4 Change Wi-fi Country」を選択する。</li>
<li>「JP Japan」を選択する。</li>
<li>「Ok」を選択する。</li>
<li>raspi-configの初期画面に戻る。</li>
</ol>

<h3 id="ホスト名変更:29d369a29c800517b14390fe39a79e9d">ホスト名変更</h3>

<ol>
<li>「9 Advanced Options」を選択する。</li>
<li>「A2 Hostname」を選択する。</li>
<li>「Ok」を選択する。</li>
<li>ホスト名を設定する。</li>
<li>「Ok」を選択する。</li>
<li>raspi-configの初期画面に戻る。</li>
</ol>

<h3 id="raspi-config終了:29d369a29c800517b14390fe39a79e9d">raspi-config終了</h3>

<ol>
<li>「Finish」を選択する。</li>
<li>リブートの確認が求められるため、「Yes」を選択する。</li>
</ol>

<p>以上</p>

                </div>
              </article>
              
              <article>
                <div class="title">
                  <h1><a href="http://www.shinayoshi.net/post/2016/07/09/raspbian-jessie-install/">Raspbianのインストール</a></h1>
                  <p>
                    <span class="label label-primary">Sat Jul 9, 2016</span> in
                    
                    
                    <a href="http://www.shinayoshi.net//categories/server">server</a>
                     using tags
                    
                    
                    <a href="http://www.shinayoshi.net//tags/raspberrypi">raspberrypi</a>
                    
                     , 
                    <a href="http://www.shinayoshi.net//tags/jessie">jessie</a>
                    
                  </p>
                </div>
                <div class="contents">
                  

<p>何番煎じかわかりませんが、ディスプレイ、キーボード、マウスを使用せずにRaspbianのインストールを行い、リモートPCからSSH接続が行えるようにするまでのメモです。</p>

<h2 id="使用したもの:b6f02b3d9579b63dd4fc7d440d3b8ed6">使用したもの</h2>

<ol>
<li>Raspberry Pi 3 Model B</li>
<li>micro SDカード(32GB)</li>
<li>USB ACアダプタ(Raspberry Pi 3の電源用)</li>
<li>USBケーブル(Raspberry Pi 3の電源用)</li>
<li>LANケーブル(Raspberry Pi 3の有線LAN接続用)</li>
<li>Mac(作業用)</li>
</ol>

<h2 id="raspbianダウンロード:b6f02b3d9579b63dd4fc7d440d3b8ed6">Raspbianダウンロード</h2>

<p>公式サイトからRaspbianをダウンロードする。
2016年7月9日時点の最新バージョンは「2016-05-27-raspbian-jessie.zip」でした。</p>

<ul>
<li><a href="https://www.raspberrypi.org/downloads/raspbian/">Download Raspbian for Raspberry Pi</a></li>
</ul>

<h2 id="raspbian書き込み:b6f02b3d9579b63dd4fc7d440d3b8ed6">Raspbian書き込み</h2>

<p>SDカードにRaspbianのイメージを書き込む。</p>

<ol>
<li>SDカードデバイスを確認する。
&gt; $ diskutil list<br />
&gt; /dev/disk1<br />
&gt;    #:                       TYPE NAME                    SIZE       IDENTIFIER<br />
&gt;    0:     FDisk_partition_scheme                        *32.2 GB    disk1<br />
&gt;    1:             Windows_FAT_32 NO NAME                 32.2 GB    disk1s1<br /></li>
<li>SDカードデバイスをアンマウントする。
&gt; $ diskutil umountDisk /dev/disk1<br />
&gt; Unmount of all volumes on disk1 was successful<br /></li>
<li>SDカードにRaspbianのイメージを書き込む。
&gt; $ sudo dd bs=1m if=2016-05-27-raspbian-jessie.img of=/dev/rdisk1<br />
&gt; Password:<br />
&gt; 958+1 records in<br />
&gt; 958+1 records out<br />
&gt; 4019191808 bytes transferred in 269.163670 secs (14932148 bytes/sec)<br /></li>
<li>SDカードデバイスを取り出す。
&gt; $ diskutil eject /dev/disk1<br />
&gt; Disk /dev/disk1 ejected<br /></li>
</ol>

<h2 id="raspbian起動:b6f02b3d9579b63dd4fc7d440d3b8ed6">Raspbian起動</h2>

<p>Raspbianのイメージを書き込んだSDカードをRaspberry Pi 3にセットして電源を入れる。
Raspberry Pi 3には有線LANも接続しておく。</p>

<h2 id="raspbian接続:b6f02b3d9579b63dd4fc7d440d3b8ed6">Raspbian接続</h2>

<ol>
<li>Raspberry Pi 3のIPアドレスを確認する。
&gt; $ arp -a<br />
&gt; ? (192.168.1.10) at b8:27:eb:xx:xx:xx on en0 ifscope [ethernet]</li>
<li>SSHでRaspberry Pi 3に接続する。
&gt; $ ssh pi@192.168.1.10<br />
&gt; pi@192.168.1.10&rsquo;s password:<br />
&gt; ※piユーザのデフォルトパスワードは「raspberry」<br /></li>
</ol>

<h2 id="参考:b6f02b3d9579b63dd4fc7d440d3b8ed6">参考</h2>

<ul>
<li><a href="https://www.raspberrypi.org/documentation/installation/installing-images/mac.md">Installing operating system images on Mac OS - Raspberry Pi Documentation</a></li>
</ul>

<p>以上</p>

                </div>
              </article>
              
              <article>
                <div class="title">
                  <h1><a href="http://www.shinayoshi.net/post/2016/05/15/apache-setup/">ApacheでWebサイトを公開する</a></h1>
                  <p>
                    <span class="label label-primary">Sun May 15, 2016</span> in
                    
                    
                    <a href="http://www.shinayoshi.net//categories/server">server</a>
                     using tags
                    
                    
                    <a href="http://www.shinayoshi.net//tags/centos">centos</a>
                    
                  </p>
                </div>
                <div class="contents">
                  

<p>ApacheでWebサイトを公開するまでの手順のメモです。</p>

<h2 id="apacheとphpのインストール:cb5d764d8c08bb095f7a6ed7bff2ff04">ApacheとPHPのインストール</h2>

<p>Webサーバ(Apache)とPHPをインストールします。</p>

<blockquote>
<p># yum install httpd php php-mbstring</p>
</blockquote>

<h2 id="apacheの設定:cb5d764d8c08bb095f7a6ed7bff2ff04">Apacheの設定</h2>

<p>Apacheを設定します。</p>

<blockquote>
<p># vi /etc/httpd/conf/httpd.conf<br />
#ServerName www.example.com:80<br />
↓変更<br />
ServerName www.example.com:80</p>

<p>#<br />
# AllowOverride controls what directives may be placed in .htaccess files.<br />
# It can be &ldquo;All&rdquo;, &ldquo;None&rdquo;, or any combination of the keywords:<br />
#   Options FileInfo AuthConfig Limit<br />
#<br />
    AllowOverride None<br />
    ↓変更<br />
    AllowOverride All</p>

<p>AddDefaultCharset UTF-8<br />
↓変更<br />
#AddDefaultCharset UTF-8</p>
</blockquote>

<h2 id="apacheの起動:cb5d764d8c08bb095f7a6ed7bff2ff04">Apacheの起動</h2>

<p>Apacheを起動します。</p>

<blockquote>
<p>$ sudo systemctl start httpd<br />
$ sudo systemctl enable httpd</p>
</blockquote>

<h2 id="firewallの設定:cb5d764d8c08bb095f7a6ed7bff2ff04">Firewallの設定</h2>

<p>FirewallでWeb通信を許可します。</p>

<blockquote>
<p>$ sudo firewall-cmd --permanent --zone=public --add-service=http<br />
$ sudo firewall-cmd --reload<br />
$ sudo firewall-cmd --list-all-zones</p>
</blockquote>

<h2 id="動作確認:cb5d764d8c08bb095f7a6ed7bff2ff04">動作確認</h2>

<p>外部からWebサイトにアクセスできるか確認します。</p>

<blockquote>
<p>$ sudo vi /var/www/html/index.php</p>
</blockquote>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ja&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;title&gt;net-tools&lt;/title&gt;
    &lt;meta name=&quot;description&quot; content=&quot;shinayoshi shinayoshi.net&quot; /&gt;
    &lt;meta name=&quot;author&quot; content=&quot;shinayoshi&quot; /&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;&lt;?php echo $_SERVER[&quot;REMOTE_ADDR&quot;]; ?&gt;&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Webブラウザ等でWebサーバにアクセスできることを確認します。
正常にアクセスできていれば接続元のIPアドレスが表示されているはずです。</p>

<h2 id="その他:cb5d764d8c08bb095f7a6ed7bff2ff04">その他</h2>

<p>実際にWebサイトを公開するには、DNSの設定や素敵なコンテンツを作成する必要がありますが割愛します。</p>

                </div>
              </article>
              
              <article>
                <div class="title">
                  <h1><a href="http://www.shinayoshi.net/post/2016/01/16/onamae-vpn-setup/">お名前.com VPS(KVM)の初期設定(CentOS 7 1511)</a></h1>
                  <p>
                    <span class="label label-primary">Sat Jan 16, 2016</span> in
                    
                    
                    <a href="http://www.shinayoshi.net//categories/server">server</a>
                     using tags
                    
                    
                    <a href="http://www.shinayoshi.net//tags/centos">centos</a>
                    
                  </p>
                </div>
                <div class="contents">
                  

<p>お名前.comのVPS(KVM)の初期設定メモを残しておく。
「CentOS-7-x86_64-Minimal-1511.iso」を使用して再インストール後からの設定を記載しています。</p>

<h2 id="rootでログイン:130a6ce433fd353093f8e4a56dec5622">rootでログイン</h2>

<p>お名前.comのコンソール画面でログインを行います。</p>

<blockquote>
<p>login: root<br />
Password:</p>
</blockquote>

<p>ログインに成功すると以下のようなプロンプトが表示されます。</p>

<blockquote>
<p>[root@&lt;ホスト名&gt; ~]#</p>
</blockquote>

<p>以降の手順では、rootアカウントのプロンプトを<code>#</code>で表現します。</p>

<h2 id="シリアルコンソール接続の有効化:130a6ce433fd353093f8e4a56dec5622">シリアルコンソール接続の有効化</h2>

<p>シリアルコンソールで接続できるように設定します。</p>

<blockquote>
<p># vi /etc/default/grub<br />
GRUB_CMDLINE_LINUX=&ldquo;rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet&rdquo;<br />
↓変更<br />
GRUB_CMDLINE_LINUX=&ldquo;rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet console=tty0 console=ttyS0,115200n8r&rdquo;<br />
# grub2-mkconfig -o /boot/grub2/grub.cfg<br />
# reboot</p>
</blockquote>

<h2 id="共用sshサーバ経由のシリアルコンソール接続:130a6ce433fd353093f8e4a56dec5622">共用SSHサーバ経由のシリアルコンソール接続</h2>

<p>お名前.comのVPS(KVM)には、VPSにシリアルコンソール接続するための共用SSHサーバが用意されています。以降の設定はこのSSHサーバ経由のシリアルコンソール接続で作業します。</p>

<p>SSH接続経由のシリアルコンソールの接続方法については、お名前.comのサイトに詳しく書かれているのでそちらをご確認ください。<a href="http://guide.onamae-server.com/vpskvm/3_14_15_75_2/">SSH接続経由のシリアルコンソール | SSH接続 | VPS (KVM) 活用ガイド</a></p>

<h2 id="ホスト名変更:130a6ce433fd353093f8e4a56dec5622">ホスト名変更</h2>

<p>ホスト名の変更を行います。</p>

<blockquote>
<p># hostnamectl set-hostname newhost.example.com</p>
</blockquote>

<p>ホスト名の変更を反映するために再起動を行います。</p>

<blockquote>
<p># reboot</p>
</blockquote>

<p>再度、お名前.comのコンソール画面でログインを行い、ホスト名が変更されていることを確認します。</p>

<h2 id="パッケージの更新:130a6ce433fd353093f8e4a56dec5622">パッケージの更新</h2>

<p>パッケージを最新の状態に更新します。</p>

<blockquote>
<p># yum -y update</p>
</blockquote>

<p>kernelのバージョンアップがあった場合にはサーバの再起動を実施します。</p>

<blockquote>
<p># reboot</p>
</blockquote>

<h2 id="管理者アカウントの作成:130a6ce433fd353093f8e4a56dec5622">管理者アカウントの作成</h2>

<p>通常使用する管理者アカウントを作成します。また、管理者アカウントにパスワードを設定します。</p>

<blockquote>
<p># useradd centos<br />
# passwd centos<br />
Changing password for user centos.<br />
New password: &lt;パスワード入力&gt;<br />
Retype new password: &lt;パスワード再入力&gt;<br />
passwd: all authentication tokens updated successfully.<br />
# gpasswd -a centos wheel</p>
</blockquote>

<h2 id="sudo権限の付与:130a6ce433fd353093f8e4a56dec5622">sudo権限の付与</h2>

<p>管理者アカウントにsudo権限を付与します。以下ではcentosにROOT関連のコマンドとSHUTDOWN関連のコマンド以外のすべてのコマンドの実行権限を付与しています。</p>

<blockquote>
<p># visudo -f /etc/sudoers.d/wheel<br />
Cmnd_Alias ROOT = /bin/su, /usr/bin/sudo<br />
Cmnd_Alias SHUTDOWN = /sbin/halt, /sbin/shutdown, /sbin/poweroff, /sbin/reboot, /sbin/fastboot, /sbin/init<br />
%wheel  ALL=(ALL)       ALL,!ROOT,!SHUTDOWN</p>
</blockquote>

<h2 id="rootのログアウトと管理者アカウントでログイン:130a6ce433fd353093f8e4a56dec5622">rootのログアウトと管理者アカウントでログイン</h2>

<p>管理者アカウントを作成してsudoが使えるようになったので、rootアカウントをログアウトして管理者アカウントでログインし直します。</p>

<blockquote>
<p># exit<br />
logout<br />
＜省略＞<br />
login: centos<br />
Password:<br />
[centos@&lt;ホスト名&gt; ~]$</p>
</blockquote>

<p>以降の手順では、管理者アカウントのプロンプトを<code>$</code>で表現します。</p>

<h2 id="rootアカウントの無効化:130a6ce433fd353093f8e4a56dec5622">rootアカウントの無効化</h2>

<p>すべての作業は管理者アカウントで行うため、rootアカウントを無効化します。※シリアルコンソールからもrootでログインできなくなりますので、設定する際は慎重に行ってください。</p>

<blockquote>
<p>$ sudo passwd -l root<br />
[sudo] password for centos:<br />
Locking password for user root.<br />
passwd: Success</p>
</blockquote>

<h2 id="root宛てメールの転送:130a6ce433fd353093f8e4a56dec5622">root宛てメールの転送</h2>

<p>root宛てに届くメールを管理者アカウントに転送するように設定します。</p>

<blockquote>
<p>$ sudo vi /etc/aliases<br />
root:           centos<br />
$ sudo newaliases</p>
</blockquote>

<h2 id="firewalldの設定:130a6ce433fd353093f8e4a56dec5622">Firewalldの設定</h2>

<p>Firewalldを使用して不要な通信を拒否するように設定します。</p>

<h3 id="firewalldのインストール:130a6ce433fd353093f8e4a56dec5622">Firewalldのインストール</h3>

<blockquote>
<p>$ sudo yum -y install firewalld<br />
$ sudo systemctl start firewalld<br />
$ sudo systemctl enable firewalld</p>
</blockquote>

<h3 id="firewalldの設定確認:130a6ce433fd353093f8e4a56dec5622">Firewalldの設定確認</h3>

<blockquote>
<p>$ sudo firewall-cmd --get-active-zones<br />
$ sudo firewall-cmd --list-all-zones<br />
$ sudo firewall-cmd --get-services</p>
</blockquote>

<h3 id="firewalldの初期設定:130a6ce433fd353093f8e4a56dec5622">Firewalldの初期設定</h3>

<!---
デフォルトゾーンをdropに変更します。

> $ sudo firewall-cmd \-\-set-default-zone=drop  
> $ sudo firewall-cmd \-\-get-default-zone  -
-->

<p>eth0のゾーンをpublicに変更します。</p>

<blockquote>
<p>$ sudo firewall-cmd --zone=public --change-interface=eth0</p>
</blockquote>

<p>publicゾーンで不要なサービスを無効化します。</p>

<blockquote>
<p>$ sudo firewall-cmd --permanent --zone=public --remove-service=ssh<br />
$ sudo firewall-cmd --permanent --zone=public --remove-service=dhcpv6-client<br />
$ sudo firewall-cmd --reload</p>
</blockquote>

<p>設定の確認</p>

<blockquote>
<p>$ sudo firewall-cmd --zone=public --list-all</p>
</blockquote>

<h2 id="selinuxの無効化:130a6ce433fd353093f8e4a56dec5622">SELinuxの無効化</h2>

<blockquote>
<p>$ sudo setenforce Permissive<br />
$ sudo getenforce</p>

<p>$ sudo vi /etc/selinux/config<br />
SELINUX=enforcing<br />
↓変更<br />
SELINUX=permissive</p>
</blockquote>

<h2 id="ipv6の無効化:130a6ce433fd353093f8e4a56dec5622">IPv6の無効化</h2>

<p>IPv6を無効化します。</p>

<blockquote>
<p>$ sudo sysctl -w net.ipv6.conf.all.disable_ipv6=1<br />
$ sudo sysctl -w net.ipv6.conf.default.disable_ipv6=1<br />
$ sudo sysctl -a | grep disable_ipv6</p>
</blockquote>

<p>上記のコマンドではシステムを再起動した場合にIPv6が有効になってしまうため、再起動しても無効になるように設定します。</p>

<blockquote>
<p>$ sudo vi /etc/sysctl.d/10-disableipv6.conf<br />
net.ipv6.conf.all.disable_ipv6=1<br />
net.ipv6.conf.default.disable_ipv6=1</p>
</blockquote>

<h3 id="postfixのipv6無効化:130a6ce433fd353093f8e4a56dec5622">PostfixのIPv6無効化</h3>

<p>IPv6の無効化に併せてPostfixもIPv6を無効化します。</p>

<blockquote>
<p>$ sudo vi /etc/postfix/main.cf<br />
#inet_protocols = all<br />
inet_protocols = ipv4<br />
$ sudo systemctl restart postfix</p>
</blockquote>

<h2 id="ntpの時刻同期:130a6ce433fd353093f8e4a56dec5622">NTPの時刻同期</h2>

<p>chronyにより時刻同期を行うように設定します。</p>

<blockquote>
<p>$ sudo yum -y install chrony<br />
$ sudo vi /etc/chrony.conf<br />
#server 0.centos.pool.ntp.org iburst<br />
#server 1.centos.pool.ntp.org iburst<br />
#server 2.centos.pool.ntp.org iburst<br />
#server 3.centos.pool.ntp.org iburst<br />
server ntp.nict.jp iburst<br />
server ntp.jst.mfeed.ad.jp iburst</p>
</blockquote>

<p>chronydを起動します。</p>

<blockquote>
<p>$ sudo systemctl start chronyd<br />
$ sudo systemctl enable chronyd</p>
</blockquote>

<p>時刻の同期状況を確認するには以下のコマンドを実行します。</p>

<blockquote>
<p>$ chronyc sources</p>
</blockquote>

<h2 id="不要サービスの停止:130a6ce433fd353093f8e4a56dec5622">不要サービスの停止</h2>

<p>セキュリティのため、サーバのリソースのために不要サービスを停止します。お名前.comのVPS(KVM)には共用SSH経由のシリアルコンソールでログインするため、SSHを停止しています。</p>

<blockquote>
<p>$ sudo systemctl list-units --type=service<br />
$ sudo systemctl stop sshd<br />
$ sudo systemctl disable sshd</p>
</blockquote>

<h2 id="logwatchのインストール:130a6ce433fd353093f8e4a56dec5622">logwatchのインストール</h2>

<p>logwatchをインストールします。</p>

<blockquote>
<p>$ sudo yum -y install logwatch</p>
</blockquote>

<p>logwatchの実行結果を確認します。</p>

<blockquote>
<p>$ sudo logwatch --output stdout</p>
</blockquote>

<p>以上、初期設定は終了となります。</p>

                </div>
              </article>
              
              <article>
                <div class="title">
                  <h1><a href="http://www.shinayoshi.net/post/2015/10/31/igo-shogi-program/">囲碁・将棋の思考エンジンの覚え書き</a></h1>
                  <p>
                    <span class="label label-primary">Sat Oct 31, 2015</span> in
                    
                    
                    <a href="http://www.shinayoshi.net//categories/diary">diary</a>
                     using tags
                    
                    
                    <a href="http://www.shinayoshi.net//tags/igo">igo</a>
                    
                     , 
                    <a href="http://www.shinayoshi.net//tags/shogi">shogi</a>
                    
                  </p>
                </div>
                <div class="contents">
                  

<p>囲碁・将棋の思考エンジンは以下が有名らしい。
よく忘れるので覚え書きとして残しておく。</p>

<p>実際に使用したことはないため、使用方法や強さはわかりません。あしからず。</p>

<h2 id="囲碁の思考エンジン:a0d1e30c95d0ce93df0972286458f7bf">囲碁の思考エンジン</h2>

<ul>
<li><a href="http://pachi.or.cz">Pachi</a></li>
<li><a href="http://fuego.sourceforge.net">Fuego</a></li>
<li><a href="http://www.gnu.org/software/gnugo/download.html">GNU Go</a></li>
</ul>

<h2 id="将棋の思考エンジン:a0d1e30c95d0ce93df0972286458f7bf">将棋の思考エンジン</h2>

<ul>
<li><a href="http://www.geocities.jp/bonanza_shogi/">Bonanza</a></li>
<li><a href="http://hiraokatakuya.github.io/apery/">Apery</a></li>
<li><a href="http://gps.tanaka.ecc.u-tokyo.ac.jp/gpsshogi/">GPSshogi</a></li>
</ul>

<h3 id="将棋guiソフト:a0d1e30c95d0ce93df0972286458f7bf">将棋GUIソフト</h3>

<ul>
<li><a href="http://www.geocities.jp/shogidokoro/index.html">将棋所</a></li>
</ul>

                </div>
              </article>
              
              <article>
                <div class="title">
                  <h1><a href="http://www.shinayoshi.net/post/2015/09/06/first-post/">hugo始めました</a></h1>
                  <p>
                    <span class="label label-primary">Sun Sep 6, 2015</span> in
                    
                    
                    <a href="http://www.shinayoshi.net//categories/diary">diary</a>
                     using tags
                    
                    
                    <a href="http://www.shinayoshi.net//tags/blog">blog</a>
                    
                  </p>
                </div>
                <div class="contents">
                  <p>Hugoでブログ始めました。</p>

<p>本ブログでは私が得た技術的な知識・経験を投稿していく予定です。</p>

<p>今後ともよろしくお願いします。</p>

                </div>
              </article>
              
              <div class="pagination">
                <ul class="pager">
  
  <li>Page 1 of 1</li>
  
</ul>

              </div>
            </div>
            <div class="sidebar col-md-3">
              <aside>
  
<section class="panel panel-default">
  <div class="panel-heading">
    <h1 class="panel-title">Profile</h1>
  </div>
  <div id="profile" class="panel-body text-center">
    <img src="http://www.shinayoshi.net//img/logo.png" alt="logo" class="img-responsive center-block" />
    <p>
      <a href="http://www.shinayoshi.net//about/">Author: shinayoshi</a>
    </p>
    <ul class="list-inline">
  

  

  

  
  <li>
    <a href="https://github.com/shinayoshi" target="_blank">
      <i class="fa fa-github-square fa-lg"></i>
    </a>
  </li>
  

  
  <li>
    <a href="https://bitbucket.org/shinayoshi" target="_blank">
      <i class="fa fa-bitbucket-square fa-lg"></i>
    </a>
  </li>
  

  
  <li>
    <a href="http://www.slideshare.net/shinayoshi" target="_blank">
      <i class="fa fa-slideshare fa-lg"></i>
    </a>
  </li>
  
</ul>

  </div>
</section>

  <section class="panel panel-default">
  <div class="panel-heading">
    <h1 class="panel-title">Recent Posts</h1>
  </div>
  <div id="recent_posts" class="list-group">
    
      
      <a href="http://www.shinayoshi.net/post/2016/07/16/raspberrypi-kivy-setup/" class="list-group-item">RaspbianにKivyをセットアップ [ 2016-07-16 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2016/07/12/raspberrypi-touchscreen-setup/" class="list-group-item">Raspberry Pi 3にRaspberry Pi 7&#34; Touch Screen LCDを接続 [ 2016-07-12 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2016/07/10/raspbian-wifi-setup/" class="list-group-item">Raspberry Pi 3でWiFi設定 [ 2016-07-10 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2016/07/09/raspbian-jessie-setup/" class="list-group-item">Raspbianの初期設定 [ 2016-07-09 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2016/07/09/raspbian-jessie-install/" class="list-group-item">Raspbianのインストール [ 2016-07-09 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2016/05/15/apache-setup/" class="list-group-item">ApacheでWebサイトを公開する [ 2016-05-15 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2016/01/16/onamae-vpn-setup/" class="list-group-item">お名前.com VPS(KVM)の初期設定(CentOS 7 1511) [ 2016-01-16 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2015/10/31/igo-shogi-program/" class="list-group-item">囲碁・将棋の思考エンジンの覚え書き [ 2015-10-31 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2015/09/06/first-post/" class="list-group-item">hugo始めました [ 2015-09-06 ]</a>
      
    
  </div>
</section>

  
<section class="panel panel-default">
  <div class="panel-heading">
    <h1 class="panel-title">Categories</h1>
  </div>
  <div id="categories" class="list-group">
    
    <a href="http://www.shinayoshi.net//categories/diary" class="list-group-item"><span class="badge">2</span>diary</a>
    
    <a href="http://www.shinayoshi.net//categories/server" class="list-group-item"><span class="badge">7</span>server</a>
    
  </div>
</section>

  
<section class="panel panel-default">
  <div class="panel-heading">
    <h1 class="panel-title">Tags</h1>
  </div>
  <div id="tags" class="panel-body">
    
    
    <a href="http://www.shinayoshi.net//tags/blog" >blog (1)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/centos" >centos (2)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/igo" >igo (1)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/jessie" >jessie (3)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/kivy" >kivy (1)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/raspberrypi" >raspberrypi (5)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/shogi" >shogi (1)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/wifi" >wifi (1)</a>
    
    
  </div>
</section>

</aside>

            </div>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <hr />
          </div>
        </div>
      </div>
      <footer role="contentinfo">
        <div class="container">
          <p class="text-muted credits">
            Copyright (c) 2016 shinayoshi<br />
            <small>
              <span class="credit">Powered By <a href="http://hugo.spf13.com">Hugo</a></span>
            </small>
          </p>
        </div>
      </footer>

      
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
      
      <script src="http://www.shinayoshi.net//js/bootstrap.min.js"></script>

      <script src="https://yandex.st/highlightjs/8.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script>
      
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-37226857-2', 'auto');
  ga('send', 'pageview');
</script>


    </div>
  </body>
</html>

