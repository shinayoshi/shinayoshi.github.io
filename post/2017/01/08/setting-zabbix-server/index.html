
<!DOCTYPE html>
<html class="no-js" lang="ja">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="generator" content="Hugo 0.15" />

    <base href="http://www.shinayoshi.net/" />
    <title>shinayoshi&#39;s note</title>
    <link rel="canonical" href="http://www.shinayoshi.net/" />
    <link href="http://www.shinayoshi.net//img/favicon.ico" type="image/vnd.microsoft.icon" rel="icon" />
    <link href="" rel="alternate" title="shinayoshi&#39;s note" type="application/rss+xml" />

    
    <link href="http://www.shinayoshi.net//css/bootstrap.min.css" rel="stylesheet">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://yandex.st/highlightjs/8.0/styles/default.min.css">

    
    
    
  </head>
  <body>
    <div id="wrap">


      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" title="toggle navbar" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="http://www.shinayoshi.net//">shinayoshi&#39;s note</a>
            </div>
            <div class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <li><a href="http://www.shinayoshi.net//">Home</a></li>
                <li><a href="http://www.shinayoshi.net//post/">All posts</a></li>
              </ul>
              <ul class="nav navbar-nav navbar-right">
                
                <li>
                  <form class="search navbar-form navbar-right" role="search" action="https://www.google.com/search" method="GET">
                    <input type="hidden" name="sitesearch" value="www.shinayoshi.net" />
                    <div class="form-group">
                      <input type="text" class="form-control" placeholder="Search" name="q" />
                    </div>
                  </form>
                </li>
                
                <li>
                  <a class="subscribe-rss" href="" title="subscribe via RSS">
                    <i class="fa fa-rss fa-lg"></i>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </header>


      <div id="main" role="main" class="container">
        <div id="content">
          <div class="row">
            <div class="page-content col-md-9">
              <article>
                <div class="title">
                  <h1>家庭内インターネット接続環境を構築する その12</h1>
                  <p>
                    <span class="label label-primary">Sun Jan 8, 2017</span> in
                    
                    
                    <a href="http://www.shinayoshi.net//categories/server">server</a>
                     using tags
                    
                    
                    <a href="http://www.shinayoshi.net//tags/raspberrypi">raspberrypi</a>
                    
                     , 
                    <a href="http://www.shinayoshi.net//tags/home-network">home-network</a>
                    
                     , 
                    <a href="http://www.shinayoshi.net//tags/homemon1">homemon1</a>
                    
                     , 
                    <a href="http://www.shinayoshi.net//tags/homemon2">homemon2</a>
                    
                  </p>
                </div>
                <div class="panel panel-info">
                  <div class="panel-heading">
                    <p class="panel-title">Table of Contents</p>
                  </div>
                  <div class="panel-body">
                    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#zabbix-serverのインストール:d408cd6d355b48aec871928776dae66b">Zabbix Serverのインストール</a>
<ul>
<li><a href="#mysqlの初期設定:d408cd6d355b48aec871928776dae66b">MySQLの初期設定</a></li>
<li><a href="#apache2の初期設定:d408cd6d355b48aec871928776dae66b">Apache2の初期設定</a></li>
<li><a href="#zabbix-serverの設定:d408cd6d355b48aec871928776dae66b">Zabbix Serverの設定</a></li>
<li><a href="#zabbixのサーバ設定:d408cd6d355b48aec871928776dae66b">Zabbixのサーバ設定</a></li>
<li><a href="#zabbix-serverへのアクセス:d408cd6d355b48aec871928776dae66b">Zabbix Serverへのアクセス</a></li>
<li><a href="#zabbix-serverへのログイン:d408cd6d355b48aec871928776dae66b">Zabbix Serverへのログイン</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
                  </div>
                </div>
                <div class="contents">
                  

<p>FortiGate 60DとRaspberry Piを使用して家庭内インターネット接続環境を構築します。
最終的には以下のような構成を想定しています。</p>

<p><img src="/img/20161022_01/home-network.png" alt="home network" width="640px" /></p>

<p>前回に引き続き<code>homemon1</code>、<code>homemon2</code>を構築していきます。
本環境の監視を行うためにZabbixを導入します。</p>

<h2 id="zabbix-serverのインストール:d408cd6d355b48aec871928776dae66b">Zabbix Serverのインストール</h2>

<pre><code>$ sudo -E apt-get install zabbix-server-mysql zabbix-frontend-php php5-mysql task-japanese
パッケージリストを読み込んでいます... 完了
依存関係ツリーを作成しています                
状態情報を読み取っています... 完了
以下の追加パッケージがインストールされます:
  apache2 apache2-bin apache2-data apache2-utils bdf2psf fbterm
  fontconfig-config fonts-dejavu-core fping libaio1 libapache2-mod-php5
  libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap libcurl3-gnutls
  libdbd-mysql-perl libdbi-perl libfontconfig1 libfontenc1 libgd3
  libhtml-template-perl libiksemel3 libjbig0 libltdl7 liblua5.1-0
  libmysqlclient18 libodbc1 libonig2 libopenipmi0 libpci3
  libperl4-corelibs-perl libperl5.20 libqdbm14 libsensors4 libsnmp-base
  libsnmp30 libterm-readkey-perl libtiff5 libvpx1 libxfont1 libxpm4 lsof lv
  manpages-ja manpages-ja-dev mysql-client-5.5 mysql-common mysql-server
  mysql-server-5.5 mysql-server-core-5.5 nkf php5 php5-cli php5-common php5-gd
  php5-json php5-ldap php5-readline psf-unifont snmpd ssl-cert ttf-dejavu-core
  ttf-unifont unifont x11-common xfonts-encodings xfonts-unifont xfonts-utils
提案パッケージ:
  www-browser apache2-doc apache2-suexec-pristine apache2-suexec-custom
  php-pear libclone-perl libmldbm-perl libnet-daemon-perl
  libsql-statement-perl libgd-tools libipc-sharedcache-perl libmyodbc
  odbc-postgresql tdsodbc unixodbc-bin lm-sensors snmp-mibs-downloader mailx
  tinyca php5-user-cache snmptrapd openssl-blacklist unifont-bin
以下のパッケージが新たにインストールされます:
  apache2 apache2-bin apache2-data apache2-utils bdf2psf fbterm
  fontconfig-config fonts-dejavu-core fping libaio1 libapache2-mod-php5
  libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap libcurl3-gnutls
  libdbd-mysql-perl libdbi-perl libfontconfig1 libfontenc1 libgd3
  libhtml-template-perl libiksemel3 libjbig0 libltdl7 liblua5.1-0
  libmysqlclient18 libodbc1 libonig2 libopenipmi0 libpci3
  libperl4-corelibs-perl libperl5.20 libqdbm14 libsensors4 libsnmp-base
  libsnmp30 libterm-readkey-perl libtiff5 libvpx1 libxfont1 libxpm4 lsof lv
  manpages-ja manpages-ja-dev mysql-client-5.5 mysql-common mysql-server
  mysql-server-5.5 mysql-server-core-5.5 nkf php5 php5-cli php5-common php5-gd
  php5-json php5-ldap php5-mysql php5-readline psf-unifont snmpd ssl-cert
  task-japanese ttf-dejavu-core ttf-unifont unifont x11-common
  xfonts-encodings xfonts-unifont xfonts-utils zabbix-frontend-php
  zabbix-server-mysql
アップグレード: 0 個、新規インストール: 73 個、削除: 0 個、保留: 1 個。
43.9 MB のアーカイブを取得する必要があります。
この操作後に追加で 211 MB のディスク容量が消費されます。
続行しますか? [Y/n] y
取得:1 http://archive.raspberrypi.org/debian/ jessie/main libxfont1 armhf 1:1.5.2-1 [119 kB]
取得:2 http://mirrordirector.raspbian.org/raspbian/ jessie/main libpci3 armhf 1:3.2.1-3 [48.2 kB]
取得:3 http://mirrordirector.raspbian.org/raspbian/ jessie/main libapr1 armhf 1.5.1-3 [77.1 kB]
取得:4 http://mirrordirector.raspbian.org/raspbian/ jessie/main libaprutil1 armhf 1.5.4-1 [75.9 kB]
取得:5 http://mirrordirector.raspbian.org/raspbian/ jessie/main libaprutil1-dbd-sqlite3 armhf 1.5.4-1 [17.7 kB]
取得:6 http://mirrordirector.raspbian.org/raspbian/ jessie/main libaprutil1-ldap armhf 1.5.4-1 [16.7 kB]
取得:7 http://mirrordirector.raspbian.org/raspbian/ jessie/main liblua5.1-0 armhf 5.1.5-7.1 [83.7 kB]
取得:8 http://mirrordirector.raspbian.org/raspbian/ jessie/main apache2-bin armhf 2.4.10-10+deb8u7 [893 kB]
取得:9 http://mirrordirector.raspbian.org/raspbian/ jessie/main apache2-utils armhf 2.4.10-10+deb8u7 [194 kB]
取得:10 http://mirrordirector.raspbian.org/raspbian/ jessie/main apache2-data all 2.4.10-10+deb8u7 [163 kB]
取得:11 http://mirrordirector.raspbian.org/raspbian/ jessie/main apache2 armhf 2.4.10-10+deb8u7 [207 kB]
取得:12 http://mirrordirector.raspbian.org/raspbian/ jessie/main libaio1 armhf 0.3.110-1 [9,228 B]
取得:13 http://mirrordirector.raspbian.org/raspbian/ jessie/main libcurl3-gnutls armhf 7.38.0-4+deb8u5 [225 kB]
取得:14 http://mirrordirector.raspbian.org/raspbian/ jessie/main fonts-dejavu-core all 2.34-1 [1,047 kB]
取得:15 http://mirrordirector.raspbian.org/raspbian/ jessie/main fontconfig-config all 2.11.0-6.3+deb8u1 [274 kB]
取得:16 http://mirrordirector.raspbian.org/raspbian/ jessie/main libfontconfig1 armhf 2.11.0-6.3+deb8u1 [312 kB]
取得:17 http://mirrordirector.raspbian.org/raspbian/ jessie/main libfontenc1 armhf 1:1.1.2-1 [23.9 kB]
取得:18 http://mirrordirector.raspbian.org/raspbian/ jessie/main libjbig0 armhf 2.1-3.1 [27.5 kB]
取得:19 http://mirrordirector.raspbian.org/raspbian/ jessie/main libtiff5 armhf 4.0.3-12.3+deb8u1 [194 kB]
取得:20 http://mirrordirector.raspbian.org/raspbian/ jessie/main libvpx1 armhf 1.3.0-3+rvt [783 kB]
取得:21 http://mirrordirector.raspbian.org/raspbian/ jessie/main libxpm4 armhf 1:3.5.11-1 [41.7 kB]
取得:22 http://mirrordirector.raspbian.org/raspbian/ jessie/main libgd3 armhf 2.1.0-5+deb8u8 [127 kB]
取得:23 http://mirrordirector.raspbian.org/raspbian/ jessie/main libiksemel3 armhf 1.4-2 [23.4 kB]
取得:24 http://mirrordirector.raspbian.org/raspbian/ jessie/main libltdl7 armhf 2.4.2-1.11 [42.5 kB]
取得:25 http://mirrordirector.raspbian.org/raspbian/ jessie/main mysql-common all 5.5.53-0+deb8u1 [75.5 kB]
取得:26 http://mirrordirector.raspbian.org/raspbian/ jessie/main libmysqlclient18 armhf 5.5.53-0+deb8u1 [617 kB]
取得:27 http://mirrordirector.raspbian.org/raspbian/ jessie/main libodbc1 armhf 2.3.1-3 [179 kB]
取得:28 http://mirrordirector.raspbian.org/raspbian/ jessie/main libonig2 armhf 5.9.5-3.2 [101 kB]
取得:29 http://mirrordirector.raspbian.org/raspbian/ jessie/main libsensors4 armhf 1:3.3.5-2 [48.9 kB]
取得:30 http://mirrordirector.raspbian.org/raspbian/ jessie/main libperl5.20 armhf 5.20.2-3+deb8u6 [1,354 B]
取得:31 http://mirrordirector.raspbian.org/raspbian/ jessie/main libsnmp-base all 5.7.2.1+dfsg-1 [1,544 kB]
取得:32 http://mirrordirector.raspbian.org/raspbian/ jessie/main libsnmp30 armhf 5.7.2.1+dfsg-1 [2,040 kB]
取得:33 http://mirrordirector.raspbian.org/raspbian/ jessie/main libdbi-perl armhf 1.631-3+b1 [807 kB]
取得:34 http://mirrordirector.raspbian.org/raspbian/ jessie/main libdbd-mysql-perl armhf 4.028-2+deb8u2 [113 kB]
取得:35 http://mirrordirector.raspbian.org/raspbian/ jessie/main libterm-readkey-perl armhf 2.32-1+b2 [26.1 kB]
取得:36 http://mirrordirector.raspbian.org/raspbian/ jessie/main mysql-client-5.5 armhf 5.5.53-0+deb8u1 [1,447 kB]
取得:37 http://mirrordirector.raspbian.org/raspbian/ jessie/main mysql-server-core-5.5 armhf 5.5.53-0+deb8u1 [3,448 kB]
取得:38 http://mirrordirector.raspbian.org/raspbian/ jessie/main mysql-server-5.5 armhf 5.5.53-0+deb8u1 [1,591 kB]
取得:39 http://mirrordirector.raspbian.org/raspbian/ jessie/main libperl4-corelibs-perl all 0.003-1 [43.6 kB]
取得:40 http://mirrordirector.raspbian.org/raspbian/ jessie/main lsof armhf 4.86+dfsg-1 [321 kB]
取得:41 http://mirrordirector.raspbian.org/raspbian/ jessie/main bdf2psf all 1.123 [50.4 kB]
取得:42 http://mirrordirector.raspbian.org/raspbian/ jessie/main fbterm armhf 1.7-2 [53.0 kB]
取得:43 http://mirrordirector.raspbian.org/raspbian/ jessie/main fping armhf 3.10-2 [35.2 kB]
取得:44 http://mirrordirector.raspbian.org/raspbian/ jessie/main libqdbm14 armhf 1.8.78-5+b1 [86.0 kB]
取得:45 http://mirrordirector.raspbian.org/raspbian/ jessie/main php5-common armhf 5.6.29+dfsg-0+deb8u1 [720 kB]
取得:46 http://mirrordirector.raspbian.org/raspbian/ jessie/main php5-json armhf 1.3.6-1 [16.9 kB]
取得:47 http://mirrordirector.raspbian.org/raspbian/ jessie/main php5-cli armhf 5.6.29+dfsg-0+deb8u1 [1,904 kB]
取得:48 http://mirrordirector.raspbian.org/raspbian/ jessie/main libapache2-mod-php5 armhf 5.6.29+dfsg-0+deb8u1 [1,879 kB]
取得:49 http://mirrordirector.raspbian.org/raspbian/ jessie/main libhtml-template-perl all 2.95-1 [66.8 kB]
取得:50 http://mirrordirector.raspbian.org/raspbian/ jessie/main libopenipmi0 armhf 2.0.16-1.4 [396 kB]
取得:51 http://mirrordirector.raspbian.org/raspbian/ jessie/main lv armhf 4.51-2.2 [311 kB]
取得:52 http://mirrordirector.raspbian.org/raspbian/ jessie/main manpages-ja all 0.5.0.0.20140515+dfsg-1 [3,607 kB]
取得:53 http://mirrordirector.raspbian.org/raspbian/ jessie/main php5 all 5.6.29+dfsg-0+deb8u1 [1,312 B]
取得:54 http://mirrordirector.raspbian.org/raspbian/ jessie/main task-japanese all 3.31+deb8u1 [884 B]
取得:55 http://mirrordirector.raspbian.org/raspbian/ jessie/main manpages-ja-dev all 0.5.0.0.20140515+dfsg-1 [2,274 kB]
取得:56 http://mirrordirector.raspbian.org/raspbian/ jessie/main mysql-server all 5.5.53-0+deb8u1 [73.8 kB]
取得:57 http://mirrordirector.raspbian.org/raspbian/ jessie/main nkf armhf 2.13-4 [121 kB]
取得:58 http://mirrordirector.raspbian.org/raspbian/ jessie/main php5-gd armhf 5.6.29+dfsg-0+deb8u1 [23.2 kB]
取得:59 http://mirrordirector.raspbian.org/raspbian/ jessie/main php5-ldap armhf 5.6.29+dfsg-0+deb8u1 [19.0 kB]
取得:60 http://mirrordirector.raspbian.org/raspbian/ jessie/main php5-mysql armhf 5.6.29+dfsg-0+deb8u1 [52.2 kB]
取得:61 http://mirrordirector.raspbian.org/raspbian/ jessie/main php5-readline armhf 5.6.29+dfsg-0+deb8u1 [11.2 kB]
取得:62 http://mirrordirector.raspbian.org/raspbian/ jessie/main psf-unifont all 1:7.0.06-1 [35.0 kB]
取得:63 http://mirrordirector.raspbian.org/raspbian/ jessie/main snmpd armhf 5.7.2.1+dfsg-1 [56.8 kB]
取得:64 http://mirrordirector.raspbian.org/raspbian/ jessie/main ssl-cert all 1.0.35 [20.9 kB]
取得:65 http://mirrordirector.raspbian.org/raspbian/ jessie/main ttf-dejavu-core all 2.34-1 [30.7 kB]
取得:66 http://mirrordirector.raspbian.org/raspbian/ jessie/main x11-common all 1:7.7+7 [287 kB]
取得:67 http://mirrordirector.raspbian.org/raspbian/ jessie/main xfonts-encodings all 1:1.0.4-2 [574 kB]
取得:68 http://mirrordirector.raspbian.org/raspbian/ jessie/main xfonts-utils armhf 1:7.7+2 [68.8 kB]
取得:69 http://mirrordirector.raspbian.org/raspbian/ jessie/main ttf-unifont all 1:7.0.06-1 [4,963 kB]
取得:70 http://mirrordirector.raspbian.org/raspbian/ jessie/main xfonts-unifont all 1:7.0.06-1 [2,679 kB]
取得:71 http://mirrordirector.raspbian.org/raspbian/ jessie/main unifont all 1:7.0.06-1 [1,419 kB]
取得:72 http://mirrordirector.raspbian.org/raspbian/ jessie/main zabbix-frontend-php all 1:2.2.7+dfsg-2+deb8u1 [2,901 kB]
取得:73 http://mirrordirector.raspbian.org/raspbian/ jessie/main zabbix-server-mysql armhf 1:2.2.7+dfsg-2+deb8u1 [1,696 kB]
43.9 MB を 1分 11秒 で取得しました (617 kB/s)                                  
パッケージからテンプレートを展開しています: 100%
パッケージを事前設定しています ...

↓rootアカウントのパスワードを設定します。
 ┌───────────────────┤ mysql-server-5.5 を設定しています ├───────────────────┐
 │ 強制ではありませんが、MySQL を管理する &quot;root&quot; ユーザのパスワードを設定す  │ 
 │ ることを強くお勧めします。                                                │ 
 │                                                                           │ 
 │ この値を空のままにしておいた場合は、パスワードは変更されません。          │ 
 │                                                                           │ 
 │ MySQL の &quot;root&quot; ユーザに対する新しいパスワード:                           │ 
 │                                                                           │ 
 │ _________________________________________________________________________ │ 
 │                                                                           │ 
 │                                  &lt;了解&gt;                                   │ 
 │                                                                           │ 
 └───────────────────────────────────────────────────────────────────────────┘ 

↓再度rootアカウントのパスワードを入力します。
 ┌──────┤ mysql-server-5.5 を設定しています ├───────┐
 │                                                  │ 
 │                                                  │ 
 │ MySQL の &quot;root&quot; ユーザに対する新しいパスワード:  │ 
 │                                                  │ 
 │ ________________________________________________ │ 
 │                                                  │ 
 │                      &lt;了解&gt;                      │ 
 │                                                  │ 
 └──────────────────────────────────────────────────┘ 

以前に未選択のパッケージ libpci3:armhf を選択しています。
(データベースを読み込んでいます ... 現在 31244 個のファイルとディレクトリがインストールされています。)
.../libpci3_1%3a3.2.1-3_armhf.deb を展開する準備をしています ...
libpci3:armhf (1:3.2.1-3) を展開しています...
以前に未選択のパッケージ libapr1:armhf を選択しています。
.../libapr1_1.5.1-3_armhf.deb を展開する準備をしています ...
libapr1:armhf (1.5.1-3) を展開しています...
以前に未選択のパッケージ libaprutil1:armhf を選択しています。
.../libaprutil1_1.5.4-1_armhf.deb を展開する準備をしています ...
libaprutil1:armhf (1.5.4-1) を展開しています...
以前に未選択のパッケージ libaprutil1-dbd-sqlite3:armhf を選択しています。
.../libaprutil1-dbd-sqlite3_1.5.4-1_armhf.deb を展開する準備をしています ...
libaprutil1-dbd-sqlite3:armhf (1.5.4-1) を展開しています...
以前に未選択のパッケージ libaprutil1-ldap:armhf を選択しています。
.../libaprutil1-ldap_1.5.4-1_armhf.deb を展開する準備をしています ...
libaprutil1-ldap:armhf (1.5.4-1) を展開しています...
以前に未選択のパッケージ liblua5.1-0:armhf を選択しています。
.../liblua5.1-0_5.1.5-7.1_armhf.deb を展開する準備をしています ...
liblua5.1-0:armhf (5.1.5-7.1) を展開しています...
以前に未選択のパッケージ apache2-bin を選択しています。
.../apache2-bin_2.4.10-10+deb8u7_armhf.deb を展開する準備をしています ...
apache2-bin (2.4.10-10+deb8u7) を展開しています...
以前に未選択のパッケージ apache2-utils を選択しています。
.../apache2-utils_2.4.10-10+deb8u7_armhf.deb を展開する準備をしています ...
apache2-utils (2.4.10-10+deb8u7) を展開しています...
以前に未選択のパッケージ apache2-data を選択しています。
.../apache2-data_2.4.10-10+deb8u7_all.deb を展開する準備をしています ...
apache2-data (2.4.10-10+deb8u7) を展開しています...
以前に未選択のパッケージ apache2 を選択しています。
.../apache2_2.4.10-10+deb8u7_armhf.deb を展開する準備をしています ...
apache2 (2.4.10-10+deb8u7) を展開しています...
以前に未選択のパッケージ libaio1:armhf を選択しています。
.../libaio1_0.3.110-1_armhf.deb を展開する準備をしています ...
libaio1:armhf (0.3.110-1) を展開しています...
以前に未選択のパッケージ libcurl3-gnutls:armhf を選択しています。
.../libcurl3-gnutls_7.38.0-4+deb8u5_armhf.deb を展開する準備をしています ...
libcurl3-gnutls:armhf (7.38.0-4+deb8u5) を展開しています...
以前に未選択のパッケージ fonts-dejavu-core を選択しています。
.../fonts-dejavu-core_2.34-1_all.deb を展開する準備をしています ...
fonts-dejavu-core (2.34-1) を展開しています...
以前に未選択のパッケージ fontconfig-config を選択しています。
.../fontconfig-config_2.11.0-6.3+deb8u1_all.deb を展開する準備をしています ...
fontconfig-config (2.11.0-6.3+deb8u1) を展開しています...
以前に未選択のパッケージ libfontconfig1:armhf を選択しています。
.../libfontconfig1_2.11.0-6.3+deb8u1_armhf.deb を展開する準備をしています ...
libfontconfig1:armhf (2.11.0-6.3+deb8u1) を展開しています...
以前に未選択のパッケージ libfontenc1:armhf を選択しています。
.../libfontenc1_1%3a1.1.2-1_armhf.deb を展開する準備をしています ...
libfontenc1:armhf (1:1.1.2-1) を展開しています...
以前に未選択のパッケージ libjbig0:armhf を選択しています。
.../libjbig0_2.1-3.1_armhf.deb を展開する準備をしています ...
libjbig0:armhf (2.1-3.1) を展開しています...
以前に未選択のパッケージ libtiff5:armhf を選択しています。
.../libtiff5_4.0.3-12.3+deb8u1_armhf.deb を展開する準備をしています ...
libtiff5:armhf (4.0.3-12.3+deb8u1) を展開しています...
以前に未選択のパッケージ libvpx1:armhf を選択しています。
.../libvpx1_1.3.0-3+rvt_armhf.deb を展開する準備をしています ...
libvpx1:armhf (1.3.0-3+rvt) を展開しています...
以前に未選択のパッケージ libxpm4:armhf を選択しています。
.../libxpm4_1%3a3.5.11-1_armhf.deb を展開する準備をしています ...
libxpm4:armhf (1:3.5.11-1) を展開しています...
以前に未選択のパッケージ libgd3:armhf を選択しています。
.../libgd3_2.1.0-5+deb8u8_armhf.deb を展開する準備をしています ...
libgd3:armhf (2.1.0-5+deb8u8) を展開しています...
以前に未選択のパッケージ libiksemel3:armhf を選択しています。
.../libiksemel3_1.4-2_armhf.deb を展開する準備をしています ...
libiksemel3:armhf (1.4-2) を展開しています...
以前に未選択のパッケージ libltdl7:armhf を選択しています。
.../libltdl7_2.4.2-1.11_armhf.deb を展開する準備をしています ...
libltdl7:armhf (2.4.2-1.11) を展開しています...
以前に未選択のパッケージ mysql-common を選択しています。
.../mysql-common_5.5.53-0+deb8u1_all.deb を展開する準備をしています ...
mysql-common (5.5.53-0+deb8u1) を展開しています...
以前に未選択のパッケージ libmysqlclient18:armhf を選択しています。
.../libmysqlclient18_5.5.53-0+deb8u1_armhf.deb を展開する準備をしています ...
libmysqlclient18:armhf (5.5.53-0+deb8u1) を展開しています...
以前に未選択のパッケージ libodbc1:armhf を選択しています。
.../libodbc1_2.3.1-3_armhf.deb を展開する準備をしています ...
libodbc1:armhf (2.3.1-3) を展開しています...
以前に未選択のパッケージ libonig2:armhf を選択しています。
.../libonig2_5.9.5-3.2_armhf.deb を展開する準備をしています ...
libonig2:armhf (5.9.5-3.2) を展開しています...
以前に未選択のパッケージ libsensors4:armhf を選択しています。
.../libsensors4_1%3a3.3.5-2_armhf.deb を展開する準備をしています ...
libsensors4:armhf (1:3.3.5-2) を展開しています...
以前に未選択のパッケージ libperl5.20 を選択しています。
.../libperl5.20_5.20.2-3+deb8u6_armhf.deb を展開する準備をしています ...
libperl5.20 (5.20.2-3+deb8u6) を展開しています...
以前に未選択のパッケージ libsnmp-base を選択しています。
.../libsnmp-base_5.7.2.1+dfsg-1_all.deb を展開する準備をしています ...
libsnmp-base (5.7.2.1+dfsg-1) を展開しています...
以前に未選択のパッケージ libsnmp30:armhf を選択しています。
.../libsnmp30_5.7.2.1+dfsg-1_armhf.deb を展開する準備をしています ...
libsnmp30:armhf (5.7.2.1+dfsg-1) を展開しています...
以前に未選択のパッケージ libdbi-perl を選択しています。
.../libdbi-perl_1.631-3+b1_armhf.deb を展開する準備をしています ...
libdbi-perl (1.631-3+b1) を展開しています...
以前に未選択のパッケージ libdbd-mysql-perl を選択しています。
.../libdbd-mysql-perl_4.028-2+deb8u2_armhf.deb を展開する準備をしています ...
libdbd-mysql-perl (4.028-2+deb8u2) を展開しています...
以前に未選択のパッケージ libterm-readkey-perl を選択しています。
.../libterm-readkey-perl_2.32-1+b2_armhf.deb を展開する準備をしています ...
libterm-readkey-perl (2.32-1+b2) を展開しています...
以前に未選択のパッケージ mysql-client-5.5 を選択しています。
.../mysql-client-5.5_5.5.53-0+deb8u1_armhf.deb を展開する準備をしています ...
mysql-client-5.5 (5.5.53-0+deb8u1) を展開しています...
以前に未選択のパッケージ mysql-server-core-5.5 を選択しています。
.../mysql-server-core-5.5_5.5.53-0+deb8u1_armhf.deb を展開する準備をしています ...
mysql-server-core-5.5 (5.5.53-0+deb8u1) を展開しています...
man-db (2.7.0.2-5) のトリガを処理しています ...
systemd (215-17+deb8u5) のトリガを処理しています ...
mysql-common (5.5.53-0+deb8u1) を設定しています ...
以前に未選択のパッケージ mysql-server-5.5 を選択しています。
(データベースを読み込んでいます ... 現在 32643 個のファイルとディレクトリがインストールされています。)
.../mysql-server-5.5_5.5.53-0+deb8u1_armhf.deb を展開する準備をしています ...
mysql-server-5.5 (5.5.53-0+deb8u1) を展開しています...
以前に未選択のパッケージ libperl4-corelibs-perl を選択しています。
.../libperl4-corelibs-perl_0.003-1_all.deb を展開する準備をしています ...
libperl4-corelibs-perl (0.003-1) を展開しています...
以前に未選択のパッケージ lsof を選択しています。
.../lsof_4.86+dfsg-1_armhf.deb を展開する準備をしています ...
lsof (4.86+dfsg-1) を展開しています...
以前に未選択のパッケージ bdf2psf を選択しています。
.../archives/bdf2psf_1.123_all.deb を展開する準備をしています ...
bdf2psf (1.123) を展開しています...
以前に未選択のパッケージ fbterm を選択しています。
.../fbterm_1.7-2_armhf.deb を展開する準備をしています ...
fbterm (1.7-2) を展開しています...
以前に未選択のパッケージ fping を選択しています。
.../fping_3.10-2_armhf.deb を展開する準備をしています ...
fping (3.10-2) を展開しています...
以前に未選択のパッケージ libqdbm14 を選択しています。
.../libqdbm14_1.8.78-5+b1_armhf.deb を展開する準備をしています ...
libqdbm14 (1.8.78-5+b1) を展開しています...
以前に未選択のパッケージ php5-common を選択しています。
.../php5-common_5.6.29+dfsg-0+deb8u1_armhf.deb を展開する準備をしています ...
php5-common (5.6.29+dfsg-0+deb8u1) を展開しています...
以前に未選択のパッケージ php5-json を選択しています。
.../php5-json_1.3.6-1_armhf.deb を展開する準備をしています ...
php5-json (1.3.6-1) を展開しています...
以前に未選択のパッケージ php5-cli を選択しています。
.../php5-cli_5.6.29+dfsg-0+deb8u1_armhf.deb を展開する準備をしています ...
php5-cli (5.6.29+dfsg-0+deb8u1) を展開しています...
以前に未選択のパッケージ libapache2-mod-php5 を選択しています。
.../libapache2-mod-php5_5.6.29+dfsg-0+deb8u1_armhf.deb を展開する準備をしています ...
libapache2-mod-php5 (5.6.29+dfsg-0+deb8u1) を展開しています...
以前に未選択のパッケージ libhtml-template-perl を選択しています。
.../libhtml-template-perl_2.95-1_all.deb を展開する準備をしています ...
libhtml-template-perl (2.95-1) を展開しています...
以前に未選択のパッケージ libopenipmi0 を選択しています。
.../libopenipmi0_2.0.16-1.4_armhf.deb を展開する準備をしています ...
libopenipmi0 (2.0.16-1.4) を展開しています...
以前に未選択のパッケージ libxfont1:armhf を選択しています。
.../libxfont1_1%3a1.5.2-1_armhf.deb を展開する準備をしています ...
libxfont1:armhf (1:1.5.2-1) を展開しています...
以前に未選択のパッケージ lv を選択しています。
.../archives/lv_4.51-2.2_armhf.deb を展開する準備をしています ...
lv (4.51-2.2) を展開しています...
以前に未選択のパッケージ manpages-ja を選択しています。
.../manpages-ja_0.5.0.0.20140515+dfsg-1_all.deb を展開する準備をしています ...
manpages-ja (0.5.0.0.20140515+dfsg-1) を展開しています...
以前に未選択のパッケージ manpages-ja-dev を選択しています。
.../manpages-ja-dev_0.5.0.0.20140515+dfsg-1_all.deb を展開する準備をしています ...
manpages-ja-dev (0.5.0.0.20140515+dfsg-1) を展開しています...
以前に未選択のパッケージ mysql-server を選択しています。
.../mysql-server_5.5.53-0+deb8u1_all.deb を展開する準備をしています ...
mysql-server (5.5.53-0+deb8u1) を展開しています...
以前に未選択のパッケージ nkf を選択しています。
.../archives/nkf_2.13-4_armhf.deb を展開する準備をしています ...
nkf (2.13-4) を展開しています...
以前に未選択のパッケージ php5 を選択しています。
.../php5_5.6.29+dfsg-0+deb8u1_all.deb を展開する準備をしています ...
php5 (5.6.29+dfsg-0+deb8u1) を展開しています...
以前に未選択のパッケージ php5-gd を選択しています。
.../php5-gd_5.6.29+dfsg-0+deb8u1_armhf.deb を展開する準備をしています ...
php5-gd (5.6.29+dfsg-0+deb8u1) を展開しています...
以前に未選択のパッケージ php5-ldap を選択しています。
.../php5-ldap_5.6.29+dfsg-0+deb8u1_armhf.deb を展開する準備をしています ...
php5-ldap (5.6.29+dfsg-0+deb8u1) を展開しています...
以前に未選択のパッケージ php5-mysql を選択しています。
.../php5-mysql_5.6.29+dfsg-0+deb8u1_armhf.deb を展開する準備をしています ...
php5-mysql (5.6.29+dfsg-0+deb8u1) を展開しています...
以前に未選択のパッケージ php5-readline を選択しています。
.../php5-readline_5.6.29+dfsg-0+deb8u1_armhf.deb を展開する準備をしています ...
php5-readline (5.6.29+dfsg-0+deb8u1) を展開しています...
以前に未選択のパッケージ psf-unifont を選択しています。
.../psf-unifont_1%3a7.0.06-1_all.deb を展開する準備をしています ...
psf-unifont (1:7.0.06-1) を展開しています...
以前に未選択のパッケージ snmpd を選択しています。
.../snmpd_5.7.2.1+dfsg-1_armhf.deb を展開する準備をしています ...
snmpd (5.7.2.1+dfsg-1) を展開しています...
以前に未選択のパッケージ ssl-cert を選択しています。
.../ssl-cert_1.0.35_all.deb を展開する準備をしています ...
ssl-cert (1.0.35) を展開しています...
以前に未選択のパッケージ task-japanese を選択しています。
.../task-japanese_3.31+deb8u1_all.deb を展開する準備をしています ...
task-japanese (3.31+deb8u1) を展開しています...
以前に未選択のパッケージ ttf-dejavu-core を選択しています。
.../ttf-dejavu-core_2.34-1_all.deb を展開する準備をしています ...
ttf-dejavu-core (2.34-1) を展開しています...
以前に未選択のパッケージ x11-common を選択しています。
.../x11-common_1%3a7.7+7_all.deb を展開する準備をしています ...
x11-common (1:7.7+7) を展開しています...
以前に未選択のパッケージ xfonts-encodings を選択しています。
.../xfonts-encodings_1%3a1.0.4-2_all.deb を展開する準備をしています ...
xfonts-encodings (1:1.0.4-2) を展開しています...
以前に未選択のパッケージ xfonts-utils を選択しています。
.../xfonts-utils_1%3a7.7+2_armhf.deb を展開する準備をしています ...
xfonts-utils (1:7.7+2) を展開しています...
以前に未選択のパッケージ ttf-unifont を選択しています。
.../ttf-unifont_1%3a7.0.06-1_all.deb を展開する準備をしています ...
ttf-unifont (1:7.0.06-1) を展開しています...
以前に未選択のパッケージ xfonts-unifont を選択しています。
.../xfonts-unifont_1%3a7.0.06-1_all.deb を展開する準備をしています ...
xfonts-unifont (1:7.0.06-1) を展開しています...
以前に未選択のパッケージ unifont を選択しています。
.../unifont_1%3a7.0.06-1_all.deb を展開する準備をしています ...
unifont (1:7.0.06-1) を展開しています...
以前に未選択のパッケージ zabbix-frontend-php を選択しています。
.../zabbix-frontend-php_1%3a2.2.7+dfsg-2+deb8u1_all.deb を展開する準備をしています ...
zabbix-frontend-php (1:2.2.7+dfsg-2+deb8u1) を展開しています...
以前に未選択のパッケージ zabbix-server-mysql を選択しています。
.../zabbix-server-mysql_1%3a2.2.7+dfsg-2+deb8u1_armhf.deb を展開する準備をしています ...
zabbix-server-mysql (1:2.2.7+dfsg-2+deb8u1) を展開しています...
man-db (2.7.0.2-5) のトリガを処理しています ...
systemd (215-17+deb8u5) のトリガを処理しています ...
libc-bin (2.19-18+deb8u6) のトリガを処理しています ...
libpci3:armhf (1:3.2.1-3) を設定しています ...
libapr1:armhf (1.5.1-3) を設定しています ...
libaprutil1:armhf (1.5.4-1) を設定しています ...
libaprutil1-dbd-sqlite3:armhf (1.5.4-1) を設定しています ...
libaprutil1-ldap:armhf (1.5.4-1) を設定しています ...
liblua5.1-0:armhf (5.1.5-7.1) を設定しています ...
apache2-bin (2.4.10-10+deb8u7) を設定しています ...
apache2-utils (2.4.10-10+deb8u7) を設定しています ...
apache2-data (2.4.10-10+deb8u7) を設定しています ...
apache2 (2.4.10-10+deb8u7) を設定しています ...
Enabling module mpm_event.
Enabling module authz_core.
Enabling module authz_host.
Enabling module authn_core.
Enabling module auth_basic.
Enabling module access_compat.
Enabling module authn_file.
Enabling module authz_user.
Enabling module alias.
Enabling module dir.
Enabling module autoindex.
Enabling module env.
Enabling module mime.
Enabling module negotiation.
Enabling module setenvif.
Enabling module filter.
Enabling module deflate.
Enabling module status.
Enabling conf charset.
Enabling conf localized-error-pages.
Enabling conf other-vhosts-access-log.
Enabling conf security.
Enabling conf serve-cgi-bin.
Enabling site 000-default.
libaio1:armhf (0.3.110-1) を設定しています ...
libcurl3-gnutls:armhf (7.38.0-4+deb8u5) を設定しています ...
fonts-dejavu-core (2.34-1) を設定しています ...
fontconfig-config (2.11.0-6.3+deb8u1) を設定しています ...
libfontconfig1:armhf (2.11.0-6.3+deb8u1) を設定しています ...
libfontenc1:armhf (1:1.1.2-1) を設定しています ...
libjbig0:armhf (2.1-3.1) を設定しています ...
libtiff5:armhf (4.0.3-12.3+deb8u1) を設定しています ...
libvpx1:armhf (1.3.0-3+rvt) を設定しています ...
libxpm4:armhf (1:3.5.11-1) を設定しています ...
libgd3:armhf (2.1.0-5+deb8u8) を設定しています ...
libiksemel3:armhf (1.4-2) を設定しています ...
libltdl7:armhf (2.4.2-1.11) を設定しています ...
libmysqlclient18:armhf (5.5.53-0+deb8u1) を設定しています ...
libodbc1:armhf (2.3.1-3) を設定しています ...
libonig2:armhf (5.9.5-3.2) を設定しています ...
libsensors4:armhf (1:3.3.5-2) を設定しています ...
libperl5.20 (5.20.2-3+deb8u6) を設定しています ...
libsnmp-base (5.7.2.1+dfsg-1) を設定しています ...
libsnmp30:armhf (5.7.2.1+dfsg-1) を設定しています ...
libdbi-perl (1.631-3+b1) を設定しています ...
libdbd-mysql-perl (4.028-2+deb8u2) を設定しています ...
libterm-readkey-perl (2.32-1+b2) を設定しています ...
mysql-client-5.5 (5.5.53-0+deb8u1) を設定しています ...
mysql-server-core-5.5 (5.5.53-0+deb8u1) を設定しています ...
mysql-server-5.5 (5.5.53-0+deb8u1) を設定しています ...
170108 22:06:42 [Warning] Using unique option prefix key_buffer instead of key_buffer_size is deprecated and will be removed in a future release. Please use the full name instead.
170108 22:06:42 [Note] Ignoring --secure-file-priv value as server is running with --bootstrap.
170108 22:06:42 [Note] /usr/sbin/mysqld (mysqld 5.5.53-0+deb8u1) starting as process 14599 ...
libperl4-corelibs-perl (0.003-1) を設定しています ...
lsof (4.86+dfsg-1) を設定しています ...
bdf2psf (1.123) を設定しています ...
fbterm (1.7-2) を設定しています ...
fping (3.10-2) を設定しています ...
libqdbm14 (1.8.78-5+b1) を設定しています ...
php5-common (5.6.29+dfsg-0+deb8u1) を設定しています ...

Creating config file /etc/php5/mods-available/pdo.ini with new version
php5_invoke: Enable module pdo for cli SAPI
php5_invoke: Enable module pdo for apache2 SAPI

Creating config file /etc/php5/mods-available/opcache.ini with new version
php5_invoke: Enable module opcache for cli SAPI
php5_invoke: Enable module opcache for apache2 SAPI
php5-json (1.3.6-1) を設定しています ...
php5_invoke: Enable module json for cli SAPI
php5_invoke: Enable module json for apache2 SAPI
php5-cli (5.6.29+dfsg-0+deb8u1) を設定しています ...
update-alternatives: /usr/bin/php (php) を提供するために自動モードで /usr/bin/php5 を使います
update-alternatives: /usr/bin/phar (phar) を提供するために自動モードで /usr/bin/phar5 を使います

Creating config file /etc/php5/cli/php.ini with new version
libapache2-mod-php5 (5.6.29+dfsg-0+deb8u1) を設定しています ...

Creating config file /etc/php5/apache2/php.ini with new version
Module mpm_event disabled.
Enabling module mpm_prefork.
apache2_switch_mpm Switch to prefork
apache2_invoke: Enable module php5
libhtml-template-perl (2.95-1) を設定しています ...
libopenipmi0 (2.0.16-1.4) を設定しています ...
libxfont1:armhf (1:1.5.2-1) を設定しています ...
lv (4.51-2.2) を設定しています ...
manpages-ja (0.5.0.0.20140515+dfsg-1) を設定しています ...
manpages-ja-dev (0.5.0.0.20140515+dfsg-1) を設定しています ...
mysql-server (5.5.53-0+deb8u1) を設定しています ...
nkf (2.13-4) を設定しています ...
php5 (5.6.29+dfsg-0+deb8u1) を設定しています ...
php5-gd (5.6.29+dfsg-0+deb8u1) を設定しています ...

Creating config file /etc/php5/mods-available/gd.ini with new version
php5_invoke: Enable module gd for cli SAPI
php5_invoke: Enable module gd for apache2 SAPI
php5-ldap (5.6.29+dfsg-0+deb8u1) を設定しています ...

Creating config file /etc/php5/mods-available/ldap.ini with new version
php5_invoke: Enable module ldap for cli SAPI
php5_invoke: Enable module ldap for apache2 SAPI
php5-mysql (5.6.29+dfsg-0+deb8u1) を設定しています ...

Creating config file /etc/php5/mods-available/mysql.ini with new version
php5_invoke: Enable module mysql for cli SAPI
php5_invoke: Enable module mysql for apache2 SAPI

Creating config file /etc/php5/mods-available/mysqli.ini with new version
php5_invoke: Enable module mysqli for cli SAPI
php5_invoke: Enable module mysqli for apache2 SAPI

Creating config file /etc/php5/mods-available/pdo_mysql.ini with new version
php5_invoke: Enable module pdo_mysql for cli SAPI
php5_invoke: Enable module pdo_mysql for apache2 SAPI
php5-readline (5.6.29+dfsg-0+deb8u1) を設定しています ...

Creating config file /etc/php5/mods-available/readline.ini with new version
php5_invoke: Enable module readline for cli SAPI
php5_invoke: Enable module readline for apache2 SAPI
psf-unifont (1:7.0.06-1) を設定しています ...
snmpd (5.7.2.1+dfsg-1) を設定しています ...
adduser: 警告: ホームディレクトリ `/var/lib/snmp' は、現在作成中のユーザの所属になっていません。
ssl-cert (1.0.35) を設定しています ...
task-japanese (3.31+deb8u1) を設定しています ...
ttf-dejavu-core (2.34-1) を設定しています ...
x11-common (1:7.7+7) を設定しています ...
update-rc.d: warning: start and stop actions are no longer supported; falling back to defaults
xfonts-encodings (1:1.0.4-2) を設定しています ...
xfonts-utils (1:7.7+2) を設定しています ...
ttf-unifont (1:7.0.06-1) を設定しています ...
xfonts-unifont (1:7.0.06-1) を設定しています ...
unifont (1:7.0.06-1) を設定しています ...
zabbix-frontend-php (1:2.2.7+dfsg-2+deb8u1) を設定しています ...
zabbix-server-mysql (1:2.2.7+dfsg-2+deb8u1) を設定しています ...

Creating config file /etc/zabbix/zabbix_server.conf with new version
libc-bin (2.19-18+deb8u6) のトリガを処理しています ...
systemd (215-17+deb8u5) のトリガを処理しています ...
libapache2-mod-php5 (5.6.29+dfsg-0+deb8u1) のトリガを処理しています ...
$
</code></pre>

<h3 id="mysqlの初期設定:d408cd6d355b48aec871928776dae66b">MySQLの初期設定</h3>

<p>MySQLのセキュア設定</p>

<pre><code>$ mysql_secure_installation 




NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MySQL
      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!


In order to log into MySQL to secure it, we'll need the current
password for the root user.  If you've just installed MySQL, and
you haven't set the root password yet, the password will be blank,
so you should just press enter here.

Enter current password for root (enter for none): 
OK, successfully used password, moving on...

Setting the root password ensures that nobody can log into the MySQL
root user without the proper authorisation.

You already have a root password set, so you can safely answer 'n'.

Change the root password? [Y/n] n
 ... skipping.

By default, a MySQL installation has an anonymous user, allowing anyone
to log into MySQL without having to have a user account created for
them.  This is intended only for testing, and to make the installation
go a bit smoother.  You should remove them before moving into a
production environment.

Remove anonymous users? [Y/n] Y
 ... Success!

Normally, root should only be allowed to connect from 'localhost'.  This
ensures that someone cannot guess at the root password from the network.

Disallow root login remotely? [Y/n] Y
 ... Success!

By default, MySQL comes with a database named 'test' that anyone can
access.  This is also intended only for testing, and should be removed
before moving into a production environment.

Remove test database and access to it? [Y/n] Y
 - Dropping test database...
ERROR 1008 (HY000) at line 1: Can't drop database 'test'; database doesn't exist
 ... Failed!  Not critical, keep moving...
 - Removing privileges on test database...
 ... Success!

Reloading the privilege tables will ensure that all changes made so far
will take effect immediately.

Reload privilege tables now? [Y/n] Y
 ... Success!

Cleaning up...



All done!  If you've completed all of the above steps, your MySQL
installation should now be secure.

Thanks for using MySQL!


</code></pre>

<p>MySQLの初期設定</p>

<pre><code>$ sudo cp -p /etc/mysql/my.cnf{,.org}
$ ls -l /etc/mysql/my.cnf*
-rw-r--r-- 1 root root 3533 10月 17 17:49 /etc/mysql/my.cnf
-rw-r--r-- 1 root root 3533 10月 17 17:49 /etc/mysql/my.cnf.org
$
$ sudo vi /etc/mysql/my.cnf
[mysqld]
# Add the following line to last of mysqld section
character-set-server=utf8
collation-server=utf8_general_ci
skip-character-set-client-handshake
default-storage-engine=InnoDB
innodb_file_per_table
innodb_buffer_pool_size=256M
skip-name-resolve

[mysqldump]
# Add the following line to last of mysqldump section
default-character-set=utf8

[mysql]
# Add the following line to last of mysql section
default-character-set=utf8
</code></pre>

<ul>
<li><a href="https://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html">MySQL :: MySQL 5.5 Reference Manual :: 5.1.4 Server System Variables</a></li>
</ul>

<p>MySQLの再起動</p>

<pre><code>$ sudo systemctl restart mysql
$ sudo systemctl enable mysql
Synchronizing state for mysql.service with sysvinit using update-rc.d...
Executing /usr/sbin/update-rc.d mysql defaults
Executing /usr/sbin/update-rc.d mysql enable
$
</code></pre>

<h3 id="apache2の初期設定:d408cd6d355b48aec871928776dae66b">Apache2の初期設定</h3>

<p>Apache2のセキュリティ設定</p>

<pre><code>$ sudo cp -p /etc/apache2/conf-available/security.conf{,.org}
$ ls -l /etc/apache2/conf-available/security.conf*
-rw-r--r-- 1 root root 2190  8月  7 19:56 /etc/apache2/conf-available/security.conf
-rw-r--r-- 1 root root 2190  8月  7 19:56 /etc/apache2/conf-available/security.conf.org
$
$ sudo vi /etc/apache2/conf-available/security.conf
ServerTokens Prod
ServerSignature Off
$
</code></pre>

<p>Apache2の文字コード設定</p>

<pre><code>$ sudo cp -p /etc/apache2/conf-available/charset.conf{,.org}
$ ls -l /etc/apache2/conf-available/charset.conf*
-rw-r--r-- 1 root root 315  7月  6  2016 /etc/apache2/conf-available/charset.conf
-rw-r--r-- 1 root root 315  7月  6  2016 /etc/apache2/conf-available/charset.conf.org
$
$ sudo vi /etc/apache2/conf-available/charset.conf
#AddDefaultCharset UTF-8
$
</code></pre>

<p>Apache2のServerName設定</p>

<pre><code>$ sudo sh -c &quot;echo ServerName ${HOSTNAME} &gt; /etc/apache2/conf-available/fqdn.conf&quot;
$ sudo a2enconf fqdn
Enabling conf fqdn.
To activate the new configuration, you need to run:
  service apache2 reload
$
</code></pre>

<p>Apache2の再起動</p>

<pre><code>$ sudo apachectl configtest
Syntax OK
$
$ sudo systemctl restart apache2
$ sudo systemctl enable apache2
Synchronizing state for apache2.service with sysvinit using update-rc.d...
Executing /usr/sbin/update-rc.d apache2 defaults
Executing /usr/sbin/update-rc.d apache2 enable
$
</code></pre>

<h3 id="zabbix-serverの設定:d408cd6d355b48aec871928776dae66b">Zabbix Serverの設定</h3>

<p>データベースの作成</p>

<pre><code>$ mysql -uroot -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 37
Server version: 5.5.53-0+deb8u1 (Raspbian)

Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql&gt; 
mysql&gt; create database zabbix character set utf8 collate utf8_bin;
Query OK, 1 row affected (0.00 sec)

mysql&gt; 
mysql&gt; grant all privileges on zabbix.* to zabbix@localhost identified by 'zabbix_password';
Query OK, 0 rows affected (0.01 sec)

mysql&gt; 
mysql&gt; quit
Bye
$
$ zcat /usr/share/zabbix-server-mysql/schema.sql.gz | mysql -uzabbix -p zabbix
Enter password: 
$
$ zcat /usr/share/zabbix-server-mysql/images.sql.gz | mysql -uzabbix -p zabbix
Enter password: 
$
$ zcat /usr/share/zabbix-server-mysql/data.sql.gz | mysql -uzabbix -p zabbix
Enter password: 
$
</code></pre>

<p>Apache2のZabbixサイト設定</p>

<pre><code>$ sudo cp -p /usr/share/doc/zabbix-frontend-php/examples/apache.conf /etc/apache2/conf-available/zabbix.conf
$
$ sudo vi /etc/apache2/conf-available/zabbix.conf
php_value max_execution_time 300
php_value memory_limit 128M
php_value post_max_size 16M
php_value upload_max_filesize 2M
php_value max_input_time 300
php_value date.timezone Asia/Tokyo
$
$ cat /etc/apache2/conf-available/zabbix.conf
# Define /zabbix alias, this is the default
&lt;IfModule mod_alias.c&gt;
    Alias /zabbix /usr/share/zabbix
    php_value max_execution_time 300
    php_value memory_limit 128M
    php_value post_max_size 16M
    php_value upload_max_filesize 2M
    php_value max_input_time 300
    php_value date.timezone Asia/Tokyo
&lt;/IfModule&gt;
$
$ sudo a2enconf zabbix
Enabling conf zabbix.
To activate the new configuration, you need to run:
  service apache2 reload
$
$ sudo apachectl configtest
Syntax OK
$
$ sudo systemctl restart apache2
$
</code></pre>

<h3 id="zabbixのサーバ設定:d408cd6d355b48aec871928776dae66b">Zabbixのサーバ設定</h3>

<pre><code>$ sudo cp -p /etc/zabbix/zabbix_server.conf{,.org}
$ ls -l /etc/zabbix/zabbix_server.conf*
-rw-r--r-- 1 root root 12634  9月 18 03:38 /etc/zabbix/zabbix_server.conf
-rw-r--r-- 1 root root 12634  9月 18 03:38 /etc/zabbix/zabbix_server.conf.org
$
$ sudo vi /etc/zabbix/zabbix_server.conf
DBHost=localhost
DBName=zabbix
DBUser=zabbix
DBPassword=zabbix_password
$
$ sudo cp -p /etc/default/zabbix-server{,.org}
$ ls -l /etc/default/zabbix-server*
-rw-r--r-- 1 root root 407  6月  6  2016 /etc/default/zabbix-server
-rw-r--r-- 1 root root 407  6月  6  2016 /etc/default/zabbix-server.org
$
$ sudo vi /etc/default/zabbix-server
#START=no
START=yes
$
$ sudo ln -s /usr/share/fonts/truetype/unifont/unifont.ttf /usr/share/zabbix/fonts/
$
$ sudo cp -p /usr/share/zabbix/include/defines.inc.php{,.org}
$ ls -l /usr/share/zabbix/include/defines.inc.php*
-rw-r--r-- 1 root root 30844 10月 24  2014 /usr/share/zabbix/include/defines.inc.php
-rw-r--r-- 1 root root 30844 10月 24  2014 /usr/share/zabbix/include/defines.inc.php.org
$
$ sudo vi /usr/share/zabbix/include/defines.inc.php
//define('ZBX_GRAPH_FONT_NAME',           'DejaVuSans'); // font file name
define('ZBX_GRAPH_FONT_NAME',           'unifont'); // font file name
$
</code></pre>

<p>Zabbix Serverの再起動</p>

<pre><code>$ sudo systemctl restart zabbix-server
$ sudo systemctl enable zabbix-server
Synchronizing state for zabbix-server.service with sysvinit using update-rc.d...
Executing /usr/sbin/update-rc.d zabbix-server defaults
Executing /usr/sbin/update-rc.d zabbix-server enable
$
</code></pre>

<h3 id="zabbix-serverへのアクセス:d408cd6d355b48aec871928776dae66b">Zabbix Serverへのアクセス</h3>

<p>ブラウザからZabbix ServerのURL(<code>http://IPアドレス/zabbix</code>)にアクセスします。</p>

<p>Zabbixの初期設定画面が表示されるので、画面の指示に従いながら設定を行います。</p>

<ul>
<li>1.Welcome</li>
</ul>

<p><code>Next</code>をクリックします。</p>

<p><img src="/img/20170108_01/zabbix-install-01.png" alt="zabbix-install-01" width="320px" /></p>

<ul>
<li>2.Check of pre-requisites</li>
</ul>

<p>すべて<code>OK</code>になっていることを確認して、<code>Next</code>をクリックします。</p>

<p><img src="/img/20170108_01/zabbix-install-02.png" alt="zabbix-install-02" width="320px" /></p>

<ul>
<li>3.Configure DB connection</li>
</ul>

<p>以下の情報を入力し、<code>Test connection</code>をクリックします。<code>OK</code>が表示されることを確認して、<code>Next</code>をクリックします。</p>

<pre><code>Database type: MySQL
Database host: localhost
Database port: 0
Database name: zabbix
User: zabbix
Password: zabbix_password
</code></pre>

<p><img src="/img/20170108_01/zabbix-install-05.png" alt="zabbix-install-05" width="320px" /></p>

<ul>
<li>4.Zabbix server details</li>
</ul>

<p>以下の情報を確認し、<code>Next</code>をクリックします。</p>

<pre><code>Host: localhost
Port: 10051
Name:
</code></pre>

<p><img src="/img/20170108_01/zabbix-install-06.png" alt="zabbix-install-06" width="320px" /></p>

<ul>
<li>5.Pre-Installation summary</li>
</ul>

<p>表示内容に間違いがないことを確認し、<code>Next</code>をクリックします。</p>

<p><img src="/img/20170108_01/zabbix-install-07.png" alt="zabbix-install-07" width="320px" /></p>

<ul>
<li>6.Install</li>
</ul>

<p><code>Configuration file &quot;/etc/zabbix/zabbix.conf.php&quot; created: Fail</code>と表示されます。</p>

<p><img src="/img/20170108_01/zabbix-install-08.png" alt="zabbix-install-08" width="320px" /></p>

<p>その場合は<code>Download configuration file</code>をクリックして<code>zabbix.conf.php</code>をダウンロードし、手動で<code>/etc/zabbix/</code>に配置します。</p>

<pre><code>$ ls -l /etc/zabbix/zabbix.conf.php 
-rw-r--r-- 1 root root 425  1月  8 23:17 /etc/zabbix/zabbix.conf.php
$
</code></pre>

<p><code>Retry</code>をクリックして<code>Configuration file &quot;/etc/zabbix/zabbix.conf.php&quot; created: OK</code>になったことを確認します。<code>Finish</code>をクリックします。</p>

<p><img src="/img/20170108_01/zabbix-install-09.png" alt="zabbix-install-09" width="320px" /></p>

<h3 id="zabbix-serverへのログイン:d408cd6d355b48aec871928776dae66b">Zabbix Serverへのログイン</h3>

<p>Zabbixの初期設定が完了するとログイン画面が表示されるので、デフォルトアカウント(<code>Admin/zabbix</code>)でログインします。 ログイン後は画面右上のProfileを開き、パスワードを変更しておきます。</p>

<p><img src="/img/20170108_01/zabbix-install-10.png" alt="zabbix-install-10" width="320px" /></p>

<p>以上</p>

                  
<div id="disqus_thread"></div>
<script type="text/javascript">
   
  var disqus_shortname = 'shinayoshi';

   
  (function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


                </div>
              </article>
              <div class="pagination">
                <ul class="pager">
                  
                  <li class="next"><a href="http://www.shinayoshi.net/post/2017/01/07/setting-rsyslog/">家庭内インターネット接続環境を構築する その11</a></li>
                  
                  
                  <li class="previous"><a href="http://www.shinayoshi.net/post/2017/01/09/setting-zabbix-agent/">家庭内インターネット接続環境を構築する その13</a></li>
                  
                </ul>
              </div>
            </div>
            <div class="sidebar col-md-3">
              <aside>
  
<section class="panel panel-default">
  <div class="panel-heading">
    <h1 class="panel-title">Profile</h1>
  </div>
  <div id="profile" class="panel-body text-center">
    <img src="http://www.shinayoshi.net//img/logo.png" alt="logo" class="img-responsive center-block" />
    <p>
      <a href="http://www.shinayoshi.net//about/">Author: shinayoshi</a>
    </p>
    <ul class="list-inline">
  
  <li>
    <a href="https://twitter.com/shinayoshi_net" target="_blank">
      <i class="fa fa-twitter-square fa-lg"></i>
    </a>
  </li>
  

  

  

  
  <li>
    <a href="https://github.com/shinayoshi" target="_blank">
      <i class="fa fa-github-square fa-lg"></i>
    </a>
  </li>
  

  
  <li>
    <a href="https://bitbucket.org/shinayoshi" target="_blank">
      <i class="fa fa-bitbucket-square fa-lg"></i>
    </a>
  </li>
  

  
  <li>
    <a href="http://www.slideshare.net/shinayoshi" target="_blank">
      <i class="fa fa-slideshare fa-lg"></i>
    </a>
  </li>
  
</ul>

  </div>
</section>

  <section class="panel panel-default">
  <div class="panel-heading">
    <h1 class="panel-title">Recent Posts</h1>
  </div>
  <div id="recent_posts" class="list-group">
    
      
      <a href="http://www.shinayoshi.net/post/2017/01/15/backup-raspberrypi/" class="list-group-item">家庭内インターネット接続環境を構築する その17 [ 2017-01-15 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2017/01/12/setting-rsnapshot/" class="list-group-item">家庭内インターネット接続環境を構築する その16 [ 2017-01-12 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2017/01/09/setting-snmpd/" class="list-group-item">家庭内インターネット接続環境を構築する その15 [ 2017-01-09 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2017/01/09/setting-cacti/" class="list-group-item">家庭内インターネット接続環境を構築する その14 [ 2017-01-09 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2017/01/09/setting-zabbix-agent/" class="list-group-item">家庭内インターネット接続環境を構築する その13 [ 2017-01-09 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2017/01/08/setting-zabbix-server/" class="list-group-item">家庭内インターネット接続環境を構築する その12 [ 2017-01-08 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2017/01/07/setting-rsyslog/" class="list-group-item">家庭内インターネット接続環境を構築する その11 [ 2017-01-07 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2017/01/07/setting-ntp-server/" class="list-group-item">家庭内インターネット接続環境を構築する その10 [ 2017-01-07 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2017/01/07/setting-cowrie-security/" class="list-group-item">家庭内インターネット接続環境を構築する その9 [ 2017-01-07 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2017/01/05/setting-kippo-graph/" class="list-group-item">家庭内インターネット接続環境を構築する その8 [ 2017-01-05 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2017/01/04/setting-cowrie/" class="list-group-item">家庭内インターネット接続環境を構築する その7 [ 2017-01-04 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2017/01/03/setting-proxy/" class="list-group-item">家庭内インターネット接続環境を構築する その6 [ 2017-01-03 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2017/01/03/setting-cache-dns/" class="list-group-item">家庭内インターネット接続環境を構築する その5 [ 2017-01-03 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2017/01/02/setting-fileserver/" class="list-group-item">家庭内インターネット接続環境を構築する その4 [ 2017-01-02 ]</a>
      
      <a href="http://www.shinayoshi.net/post/2017/01/01/setting-usb-storage/" class="list-group-item">家庭内インターネット接続環境を構築する その3 [ 2017-01-01 ]</a>
      
    
  </div>
</section>

  
<section class="panel panel-default">
  <div class="panel-heading">
    <h1 class="panel-title">Categories</h1>
  </div>
  <div id="categories" class="list-group">
    
    <a href="http://www.shinayoshi.net//categories/diary" class="list-group-item"><span class="badge">2</span>diary</a>
    
    <a href="http://www.shinayoshi.net//categories/server" class="list-group-item"><span class="badge">36</span>server</a>
    
  </div>
</section>

  
<section class="panel panel-default">
  <div class="panel-heading">
    <h1 class="panel-title">Tags</h1>
  </div>
  <div id="tags" class="panel-body">
    
    
    <a href="http://www.shinayoshi.net//tags/backup" >backup (1)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/bind" >bind (1)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/blog" >blog (1)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/cacti" >cacti (2)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/centos" >centos (2)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/cowrie" >cowrie (3)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/fgt-60d" >fgt-60d (1)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/fortigate" >fortigate (1)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/home-network" >home-network (17)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/homefw01" >homefw01 (1)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/homemon1" >homemon1 (6)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/homemon2" >homemon2 (6)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/homenas1" >homenas1 (6)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/homepot1" >homepot1 (5)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/homepxy1" >homepxy1 (4)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/igo" >igo (1)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/jessie" >jessie (14)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/kippo-graph" >kippo-graph (1)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/kivy" >kivy (1)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/raspberrypi" >raspberrypi (32)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/shogi" >shogi (1)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/squid" >squid (1)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/wifi" >wifi (1)</a>
    
    
    
    <a href="http://www.shinayoshi.net//tags/zabbix" >zabbix (3)</a>
    
    
  </div>
</section>

</aside>

            </div>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <hr />
          </div>
        </div>
      </div>
      <footer role="contentinfo">
        <div class="container">
          <p class="text-muted credits">
            Copyright (c) 2017 shinayoshi<br />
            <small>
              <span class="credit">Powered By <a href="http://hugo.spf13.com">Hugo</a></span>
            </small>
          </p>
        </div>
      </footer>

      
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
      
      <script src="http://www.shinayoshi.net//js/bootstrap.min.js"></script>

      <script src="https://yandex.st/highlightjs/8.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script>
      
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-37226857-2', 'auto');
  ga('send', 'pageview');
</script>


    </div>
  </body>
</html>

