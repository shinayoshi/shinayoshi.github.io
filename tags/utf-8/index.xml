<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Utf 8 on shinayoshi&#39;s note</title>
    <link>http://www.shinayoshi.net/tags/utf-8/</link>
    <description>Recent content in Utf 8 on shinayoshi&#39;s note</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <copyright>Copyright (c) 2017 shinayoshi</copyright>
    <lastBuildDate>Wed, 17 May 2017 22:43:05 +0900</lastBuildDate>
    <atom:link href="http://www.shinayoshi.net/tags/utf-8/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>LinuxでUTF-8のBOMを削除する</title>
      <link>http://www.shinayoshi.net/post/2017/05/17/remove-bom-code/</link>
      <pubDate>Wed, 17 May 2017 22:43:05 +0900</pubDate>
      
      <guid>http://www.shinayoshi.net/post/2017/05/17/remove-bom-code/</guid>
      <description>

&lt;p&gt;Linux上でUTF-8のファイルに含まれるBOM(Byte Order Mark)を削除する方法です。Webで検索するとたくさん情報が出てきますが、今回はvimを使った方法を残しておきます。&lt;/p&gt;

&lt;p&gt;きっかけとしては、Windowsで作成したシェルスクリプト(UTF-8)をLinuxで実行した際に1行目でエラーが出力されたことです。なぜエラーが出るのか調べてみるとBOMが原因であることがわかりました。
Windowsのnotepadで保存するとBOM付きで保存されるようです。&lt;/p&gt;

&lt;h2 id=&#34;bomの確認:680a720cfe2197bdb5afbf40b094d412&#34;&gt;BOMの確認&lt;/h2&gt;

&lt;p&gt;ファイルをcatやemacsで表示しても通常はBOMを見ることはできません。これはプログラムがBOM付き、BOMなしに関わらずうまく解釈して表示してくれるからです。ですが、lessやmoreではBOMをそのまま表示してくれますので、BOM有無の判断に使用できます。&lt;code&gt;&amp;lt;U+FEFF&amp;gt;&lt;/code&gt;がBOMです。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ less bom.txt
&amp;lt;U+FEFF&amp;gt;#!/bin/sh
echo hoge
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;bomの削除:680a720cfe2197bdb5afbf40b094d412&#34;&gt;BOMの削除&lt;/h2&gt;

&lt;p&gt;通常vimでファイルを開くとBOM付き、BOMなしを意識せず開いてくれます。ここで「-b(バイナリモード)」オプションをつけてvimを起動するとBOMを表示することができます。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ vim -b bom.txt
&amp;lt;feff\&amp;gt;#!/bin/sh
echo hoge
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;あとはBOM(↑でいうところの&amp;lt;feff&amp;gt;)を削除して保存すれば、BOMなしファイルができます。&lt;/p&gt;

&lt;p&gt;以上&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>